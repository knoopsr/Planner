function _cmpa(){const dj=['audio/wav','\x20theme\x20for\x20the\x20','then','boolean','desc','logPerformance','textContent','isSpecialRow','operator','transcript','textToSpeech','optionClick','isDarkTheme','userAborted','shift','onAudioEnded','up.onVisibilityChange','localMessage','element','hidden','Clear\x20chat','SpeechRecognition','temperature','onMediaRecorderDataAvailable','verbosityLevel','type','systemMessageParts','b-is-speaking','s\x20(conditionId:\x20','max_tokens','vbox','indexOf','records','count','.filters','42RyfQkn','isVisible','stopButton','tool','html','test','Model\x20definitions\x20(for\x20the\x20data\x20available\x20in\x20the\x20','catch','Verbosity','up.getHistoryPrompt','appendTo','$$name','_conversationStartMoment','offsetWidth','for\x20the\x20tools\x20operation','saveSetting','internalListeners','speaking','formatText','transcribe','updateBubbleTools','stopTransaction','newThread','modelName','audioManager','The\x20field\x20to\x20sort\x20the\x20','_sendButtonDisabledReasons','AIChatPanel','durationUnit','responseTo','maxTokens','match','toggleSendButtonState','audio-input','mediaDevices','afterConfigure','speak','okButton','selectedOption','lastRedoableMessage','ableToUndo','Missing\x20parameters','Speech\x20recognition\x20service\x20disconnected','populateSettingsMenu','updateShowTimestamp','date','\x20found','alias','voice-waiting','textfield','field','proxy','txt','fetchOptions','toggle','send','performVoiceActivation','changeItems','No\x20connection\x20detected,\x20click\x20to\x20try\x20again','b-asyncstatus','model','getPathDefault','updateAvatar','formatDate','Voice\x20control\x20could\x20not\x20be\x20started\x20on\x20your\x20device','addBubble','messages','stm','shouldAbort','b-hide-display','start\x20speaking','contextmenu','getSetting','widgetMap','aborted','data','addDuration','addSourceBuffer','The\x20value\x20to\x20use\x20for\x20this\x20condition','appendBuffer','ref','up.onExamplePromptClick','conditions','close','convert','Transcription\x20failed','s\x20rendered\x20into\x20the\x20','append','checkForSilence','error','content','setItem','Undo\x20data\x20changes','getElementFromMessage','failed\x20-\x20matching\x20','class','getHistoryPrompt','div','Incorrect\x20parameters','getItem','undo','extractMessage','changeStore','object','startRecording','onMessageEnter','isConfiguring','-previous','animateTyping','destroyed','splice','replace','Fields\x20for\x20','format','updateShowSettingsButton','b-options','b-timestamp','$mediaRecorder','savePromptHistory','parsedJson','Disable\x20voice\x20activation','push','updateend','systemMessageIntro','updating','autoStart','manageChatHistory','asyncStatusTimestamp','there\x20are\x20multiple\x20conditions\x20with\x20operator\x20=\x20on\x20the\x20same\x20field\x20-\x20use\x20type\x20any\x20instead?','drawer','startBufferedPlayback','ignoreFields','up.toggleRecording','\x20to\x20start\x20conversation','Yes','getContextFilter','Use\x20this\x20if\x20you\x20need\x20to\x20limit\x20the\x20amount\x20of\x20','tabIndex','$playbackPromise','chatpopup','verbosityLevels','up.onClearChatClick','changeAgent','ongoingPrompt','features','updateChatPanel','detectConditionErrors','onInternalClick','audio','useNativeSpeechRecognition','blob','Reading\x20','isDeeplyEqual','handled','pause','167662NBGyeK','onChatButtonContextMenu','b-icon\x20b-icon-volume-high','merge','elementData','Read\x20message',',\x20pick\x20only\x20the\x20fields\x20you\x20need','isDestroyed','Still\x20waiting\x20...','asArray','true','_speechRecognition','btip','remove','trim','voice-active','audio/mpeg','reconfigure','replaceKeywords','modelClass','b-intro','\x20*\x20','inactive','shouldIncludeTrainingDataEntry','classList','changeModels','disableVoiceActivation','there\x20is\x20a\x20matching\x20previous\x20condition\x20with\x20conditionId\x20','bottom','agent','system','188850jSWnmw','undoAction','recompose','tag','Core/widget/chat/ChatPanel.css','promissory','updateApiPlugin','stop','connect','state','requestAnimationFrame','isFinal','NoAudioDetectedError','executeAndAwaitAnimations','bind','toolCalls','stopRecording','processExternalMessage','getUserMedia','updateUndo','meta','AIChatPopup','onLocalMessage','_isRecording','message','undone','closedHtml','phrase','onAudioPaused','s\x20to\x20returned','s\x20based\x20on\x20a\x20set\x20of\x20conditions,\x20for\x20example\x20when\x20asked\x20to\x20list\x20or\x20count\x20','$name','async','name','beforePost','debugMode','addAsyncMessage','ChatButtonIconTransition','messageField','tools','readConfidenceIcon','_voiceActivationEnabled','arguments','mic','set','transactionStartedBy','blend','getValue','recording','$recordingStream','text','phraseLC','undoable','b-icon\x20b-icon-thumbs-down','isToolAvailable','stateAfter','failed\x20-\x20no\x20','uncapitalize','onClick','chatPanel','reject','slice','trainingDataMessage','auto','finally','createBasicTool','up.onBeforeRenderMessage','sleep','some','history','reload','b100-t100','warning','to\x20perform\x20the\x20update\x20on','settings','25em','redo','productName','webkitSpeechRecognition','Calling:\x20','loadStylesheet','bubbleToolClick','getPlugin','b-icon\x20b-icon-menu-horizontal','Recording\x20stopped\x20due\x20to\x20silence.','distinct','checkConnection','setAgentConfig','overflow','changeTooltip','voice-only','getTracks','activeVoiceConversation','updateIntro','asyncStatus','destroy','now','The\x20value\x20to\x20apply','s\x20on,\x20use\x20it\x20only\x20if\x20you\x20need\x20it','Voice\x20activation\x20enabled,\x20use\x20the\x20phrase\x20','redoAction','silenceTimeout','beforeShow','aria-hidden','sort','style','ChatPopup','find','play','onVoiceResult','ChatButton','triggers','ChatPanel','unshift','checkConnectionStatus','Fetched\x20in\x20a\x20total\x20of\x20','createPromptContext','Voice\x20only','delete','status','\x20-\x20','delayable','clear','client','b-icon\x20b-icon-redo','changeChatButton','stopPlayback','fields','chatpanel','conditionIds','audioMessage','AIBase','toolsDescription','updateTemperature','toolClick','s\x20based\x20on\x20a\x20set\x20of\x20conditions','array','parameters','b-icon\x20b-icon-thumbs-up','Use\x20this\x20if\x20the\x20user\x20asks\x20to\x20reload\x20the\x20','timestamp','mixin','failed:\x20','voice-inactive','\x20to\x20restart\x20conversation','getTime','createGetRecordsTool','createConditionTool','available','isPlaying','updateChatButtonState','isRecording','The\x20logic\x20type\x20for\x20combining\x20multiple\x20conditions.\x20Use\x20\x22all\x22\x20for\x20AND\x20logic\x20(all\x20conditions\x20must\x20be\x20true)\x20or\x20\x22any\x22\x20for\x20OR\x20logic\x20(any\x20condition\x20can\x20be\x20true)','micButton','systemMessageOutro','agents','ChatBubbles','toggleRecording','parseDuration','changeApiPlugin','dark','b-chat-button-animating','parseMarkdown','_recordingTimeouts','abs','querySelectorAll','b-icon-mic','$audioManager','scrollIntoView','chat-open','length','b-animate','defaultFilterBy','join','s\x20are\x20read-only','string','$conditionId','.b-message','store','clearFilters','Type\x20a\x20message','prompt-history','Be\x20verbose\x20in\x20all\x20your\x20textual\x20answers','replyOnActivation','systemMessages','up.checkConnection','AIChatMessageModel','saveCondition','onMediaRecorderStop','voice-activation-autostart','AI\x20thinking,\x20click\x20to\x20stop.\x20Right\x20click\x20to\x20open\x20chat.','b-example-prompt','updateModel','_promptHistoryIndex','b-confidence','size','split','ChatMessageModel','listeners','startPlayback','sourceopen','readAloud','models','0.3s','sendMessages','initClass','start','.b-option','pluginConfig','fftSize','forceHighlight','dataset','getState','addLocalMessage','changeChatPanel','doDestroy','conversationTimeout','addStore','clearExisting','onExamplePromptClick','Delete\x20','noresponse','getByteTimeDomainData','trigger','Thank\x20you\x20for\x20your\x20feedback!','Waiting\x20...','writing','confirm','waiting','up.onToggleHighlight','singleConditionParam','addMessage','chat','reduce','showNoConnectionIcon','toLowerCase','sendButton','Highlight','to\x20filter\x20out','abort','saveSettingsToLocalStorage','_$name','902500kIwRAM','trainingData','up.onToolClick','getPath','onChatButtonClick','readOnly','getReader','disabled','results','responseProcessed','1658790uLGHXX','examplePromptClick','savedStates','942975UgrjWA','showBy','log','ChatPanelMixin','assign','startsWith','onStopClick','processConditions','includes','processRecordsRequest','Conditions','aichatpopup','AI\x20voice\x20conversation\x20ended\x20due\x20to\x20silence.\x20Use\x20the\x20phrase\x20','6016720IpmUoX','options','fieldMap','forEach','beforeToolCall','bubbleTools','\x20-\x20use\x20that\x20instead?','chat-closed','textToSpeechUrl','conditionConfig','showReadAloud','internalStartPlayback','thumbsDown','$audioElement','Thumbs\x20down','$speechDetected','tipConfig','changes','function','.b-bottom-anchor','createMediaStreamSource','aichatpanel','key','includeReadOnly','filter','hide','onStoreChange','beforeApplyTrainingData','call','DefaultAgent','promise','focus','avatar','Not\x20recording,\x20click\x20to\x20start.\x20Right\x20click\x20to\x20open\x20chat.','stateBefore','_savedState','flatMap','to\x20remove','.b-bubble-tool','onUserAborted','$audioChunks','parse','X-Execution-Time','onVerbosityChange','A\x20single\x20condition','The\x20fields\x20to\x20return\x20for\x20each\x20','closed','intro','transformNamedObjectToArray','between','applyState','transaction','lazy','matches','querySelector','voice','No\x20input\x20audio\x20detected','thumbsUp','fetch','trackAsyncDelayStatus','get','createAnalyser','agentConfig','chatBubbles','number','compose','active','Use\x20this\x20to\x20change\x20to\x20','voiceOnly','readyState','The\x20field\x20name','b-icon\x20b-icon-filter-disable','feedbackUrl','alert','b-bottom-anchor','Be\x20short\x20and\x20concise\x20in\x20all\x20your\x20textual\x20answers.','onTextFieldInput','updateMessageAsyncStatus','b-icon-trash','onVisibilityChange','all','successfully\x20updated\x20','sameDay','voiceActivation','Message\x20timed\x20out.','35em','no-speech','ion','configurable','changeVoiceOnly','AudioManager','feedback','fullDuration','preventDefault','b-icon-message','highlight','toggleLightDarkTheme','\x20response','confidence','AIUtilities','chatbutton','post','showRedoButton','b-ai-','_pendingOptions','getStateForToolCall','voice-speaking','X-AI-execution-Time','height','_chatButton','generateTrainingData','endOfStream','headers','owner','currentFetchPromise','b-icon-play','setDatePart','light','onToolClick','animationName','asyncMessage','enableVoiceActivation','description','b-chat-avatar','tooltip','clone','b-undone-tag','abortMessage','sendFeedback','en-US','up.onMessageEnter','apiPlugin','Still\x20waiting','map','button','Voice\x20control\x20is\x20not\x20supported\x20on\x20this\x20device','Error\x20occurred\x20in\x20recognition:','add','<p\x20class=\x22b-aborted\x22>(aborted)</p>','addPlugin','relations','beforeSplitClone','processResponse','.b-example-prompt','updateMaxTokens','b-icon-stop','The\x20model\x20field\x20for\x20this\x20condition.\x20Can\x20also\x20be\x20a\x20field\x20in\x20a\x20related\x20model.\x20When\x20conditioning\x20by\x20a\x20field\x20in\x20a\x20related\x20model,\x20use\x20the\x20format\x20\x22related.fieldName\x22','value','onBeforeRenderMessage','body','_isOffline','copyTimeValues','$recordingPromise','_restartOnEnd','systemMessageTools','up.onTextFieldInput','success\x20-\x20removed\x20','user','onToggleHighlight','systemMessageModels','getStore','startTransaction','checked','Thumbs\x20up','property','chatbubbles','POST','resolve','setTimeout','addEventListener','keypress','promptUrl','updateStore','s\x20determined\x20by\x20the\x20conditions\x20passed.\x20The\x20changes\x20can\x20be\x20both\x20exact\x20and\x20relative\x20to\x20the\x20current\x20value','18WRbPhS','chatButton','isModel','toString','Speech\x20recognition\x20restarted','isOffline','addAsyncBubble','Undo\x20the\x20last\x20data\x20change\x20made\x20by\x20you','failed','Autostart\x20voice\x20activation','stringify','lastUndoableMessage','relayEvents','conditionId','location','stripHtmlTags','show','100%','A\x20condition/filter\x20criteria\x20object\x20which\x20will\x20be\x20used\x20by\x20the\x20tool\x20to\x20retrieve\x20the\x20appropriate\x20','814709sOnAFr','stateData','_configuredModels','noSpeechTimeout','up.onStopClick','assignIf','success','open','last','$isWaitingForAudio'];_cmpa=function(){return dj;};return _cmpa();}(function(a,b){const c=a();function E(a,b){return _cmpb(b-0x2f,a);}while(!![]){try{const d=-parseInt(E(0x413,0x32d))/0x1+-parseInt(E(0x40d,0x34c))/0x2*(-parseInt(E(0x192,0x252))/0x3)+-parseInt(E(0x2b5,0x18a))/0x4+parseInt(E(0xd8,0x194))/0x5+parseInt(E(0x267,0x292))/0x6*(parseInt(E(0x297,0x265))/0x7)+-parseInt(E(0xbe,0x1a4))/0x8+-parseInt(E(0x1d0,0x197))/0x9;if(d===b){break;}else{c['push'](c['shift']());}}catch(e){c['push'](c['shift']());}}}(_cmpa,0x71011));import{MessageDialog_default}from'./chunk-XFJ7GFWF.js';import{Menu,Toast}from'./chunk-57TQQEFA.js';import{AjaxHelper,ArrayHelper,AsyncHelper,Base,Button,CollectionFilter,DateHelper,Delayable_default,DomHelper,Duration,EventHelper,InstancePlugin,Model,ObjectHelper,Panel,Pluggable_default,Popup,Promissory,StateTrackingManager,Store,StringHelper,Widget,__publicField}from'./chunk-4QG53HPA.js';var ChatMessageModel=class extends Model{};__publicField(ChatMessageModel,_cmpF(0x393,0x2dc),[{'name':'fromOther','type':_cmpF(0x36d,0x437)},{'name':'text','type':_cmpF(0x386,0x30c)},{'name':_cmpF(0x1c4,0x27d),'type':_cmpF(0x3bb,0x437)},{'name':_cmpF(0x187,0x2bb),'type':_cmpF(0x21f,0x30c)},{'name':'writing','type':_cmpF(0x533,0x437)},{'name':_cmpF(0x2d5,0x34c),'type':'boolean'},{'name':'failed','type':_cmpF(0x427,0x437)},{'name':_cmpF(0x440,0x36a),'type':'array'},{'name':_cmpF(0x432,0x47d),'type':_cmpF(0x327,0x30c)},{'name':_cmpF(0x27e,0x2e9),'type':_cmpF(0x371,0x484),'defaultValue':'now'}]);ChatMessageModel['_$name']=_cmpF(0x30a,0x322);var ChatBubbles=class extends Widget{[_cmpF(0x5c2,0x4bd)](a){function G(a,b){return _cmpF(b,a- -0x2be);}if(a instanceof Store){return a;}if(a===!![]){a={};}if(!a['modelClass']){a['modelClass']=ChatMessageModel;}if(this[G(0x1db,0x204)]){a['data']=this[G(0x1db,0x17d)];}return new Store(a);}[_cmpF(0x308,0x415)](a){this['detachListeners'](H(-0x1e1,-0x18e));function H(a,b){return _cmpF(a,b- -0x49d);}a[H(0x41,-0xdd)]({'name':H(-0x18b,-0x18e),'change':'onStoreChange','refresh':H(-0x103,-0x11a),'thisObj':this});}async['onStoreChange']({action:a}){const {element:b}=this;if(a!==I(0x354,0x382)){b[I(0x570,0x55c)][I(0x589,0x444)](I(0x31b,0x35a));}const c=this[I(0x530,0x570)](b,()=>this[I(0x4d1,0x565)][I(0x438,0x30f)]());function I(a,b){return _cmpF(a,b-0x52);}await AsyncHelper['animationFrame']();this['scrollable'][I(0x33c,0x357)](b[I(0x3c1,0x3f1)](I(0x335,0x3ce)),!![]);await c;b[I(0x461,0x55c)][I(0x5f2,0x551)]('b-animate');}[_cmpF(0x45b,0x498)](a){return this['store']['add'](a)[0x0];}[_cmpF(0x3b5,0x41d)](){function J(a,b){return _cmpF(b,a-0xb5);}return this[J(0x3c4,0x512)][J(0x4a7,0x53e)]({'async':!![],'fromOther':!![]})[0x0];}[_cmpF(0x455,0x3aa)](){const {store:a,tools:b,avatar:c,intro:d,examplePrompts:e}=this;function K(a,b){return _cmpF(a,b- -0x506);}return{'children':[{'class':K(0x6a,0x0),'children':[c&&{'tag':'img','src':c,'class':K(-0x7e,-0x122)},d,...(e||[])[K(-0x2f,-0x118)](f=>({'class':K(-0x2bc,-0x1ea),'text':f}))]},...a[K(-0xd3,-0x118)](f=>{var g;const h={};this[L(0x13f,0x155)]('beforeRenderMessage',{'message':f,'messageTools':h});b&&Object[L(0x99,0x179)](h,b);const {fromOther:i,async:j,text:k,options:l,selectedOption:m,asyncStatus:n}=f,o=a[L(0x18f,0x24b)]===f,p=(g=Object['entries'](h)['map'](([q,r])=>{function M(a,b){return L(a,b-0x2ae);}var s;const t=ObjectHelper[M(0x5d3,0x4ad)](r);t['dataset']=t['dataset']||{};t[M(0x72a,0x5db)]=(s=t['tag'])!=null?s:M(0x55f,0x57f);t[M(0x37c,0x3f7)][M(0x66e,0x56e)]=q;if(t[M(0x695,0x550)]){t['dataset'][M(0x66e,0x550)]=t['field'];}if(t[M(0x37b,0x3f7)][M(0x4a8,0x550)]&&f[t[M(0x3bc,0x3f7)][M(0x482,0x550)]]!=null){t[M(0x480,0x38d)]={'--value':f[t[M(0x4cb,0x3f7)][M(0x5d1,0x550)]]};}if(t[M(0x3b5,0x4ac)]){t[M(0x48e,0x3f7)][M(0x4de,0x5c5)]=typeof t['tooltip']===M(0x3a2,0x442)?t[M(0x37d,0x4ac)]({'message':f}):t[M(0x5cb,0x4ac)];delete t[M(0x4e6,0x4ac)];}t[M(0x509,0x57d)]=(t[M(0x44d,0x57d)]||'')+'\x20b-bubble-tool';return t;}))!=null?g:[];function L(a,b){return K(a,b-0x31f);}if(f[L(0x95,0x8f)]){p[L(0x3aa,0x2e9)]({'tag':L(0x2be,0x2d1),'text':L(0xb2,0x8f),'class':L(0x15d,0x200)});}return{'class':{'b-message':0x1,'b-them':i,'b-us':!i,'b-async':j,'b-last-message':o,'b-undone':f[L(-0x2,0x8f)]},'elementData':{'message':f},'children':[{'class':{'b-bubble':0x1},'html':k,'children':[j&&{'class':'b-bubble-loading'}]},j&&n&&{'class':L(0x327,0x2ab),'text':n},i&&!j&&(p==null?void 0x0:p[L(0x1ab,0x120)])&&{'class':{'b-bubble-tools':0x1},'children':p},i&&l&&{'class':L(0x336,0x2e3),'children':l[L(0xf9,0x1a6)](q=>({'tag':L(0x27f,0x208),'class':{'b-option':0x1,'b-selected':q===m,'b-outdated':!o&&q!==m},'text':q}))}]};}),{'class':K(-0x200,-0x153)}],'listeners':{'click':'onClick','thisObj':this}};}[_cmpF(0x212,0x297)]({target:a}){function N(a,b){return _cmpF(a,b- -0x3d);}const b=a['closest'](N(0x34a,0x2d1));if(b){const {message:c}=b['elementData'];if(a[N(0x47e,0x361)](N(0x39c,0x352))){return this[N(0x2c3,0x2ff)](N(0x287,0x2a6),{'tool':a[N(0x3eb,0x2f3)][N(0x3b8,0x46a)],'message':c,'target':a});}if(a['matches'](N(0x2f5,0x2ef))&&!c['selectedOption']){const d=a[N(0x40a,0x3fd)][N(0x4d3,0x4c3)]();c[N(0x554,0x440)]=d;return this[N(0x3c7,0x2ff)](N(0x2d6,0x402),{'option':d,'message':c});}}if(a[N(0x401,0x361)](N(0x3aa,0x3bb))){return this[N(0x35d,0x2ff)](N(0x2fc,0x31d),{'prompt':a['textContent'][N(0x471,0x4c3)]()});}}[_cmpF(0x484,0x4b4)](a){var b;const c=(b=a['id'])!=null?b:a;function O(a,b){return _cmpF(b,a- -0xa0);}return[...this[O(0x3a6,0x2e4)][O(0x262,0x209)](O(0x26e,0x1a8))][O(0x228,0x25f)](d=>d[O(0x456,0x3c0)][O(0x1d5,0x143)]['id']===c);}};__publicField(ChatBubbles,_cmpF(0x27a,0x27c),'ChatBubbles');__publicField(ChatBubbles,_cmpF(0x3dd,0x44d),_cmpF(0x31e,0x40e));__publicField(ChatBubbles,_cmpF(0x31e,0x3c1),{'store':!![],'intro':null,'avatar':null,'examplePrompts':null,'scrollable':!![],'tools':null,'messages':null});ChatBubbles[_cmpF(0x321,0x32a)]();ChatBubbles[_cmpF(0x437,0x34e)]=_cmpF(0x315,0x2f9);var ChatPanelMixin_default=a=>{var b;function P(a,b){return _cmpF(a,b- -0x355);}return b=class extends a{[P(0x1ac,0x125)](){function Q(a,b){return P(b,a-0x4bd);}this[Q(0x51d,0x503)]({'source':this['sendButton']});}[P(0x1c,0x13b)](c){const d=this;function R(a,b){return P(b,a- -0x25b);}ObjectHelper[R(-0x250,-0x2f0)](c[R(-0x208,-0x2b6)],{'avatar':d[R(-0x227,-0x32b)],'examplePrompts':d['examplePrompts'],'tools':d[R(-0x242,-0xfe)],'intro':d[R(-0x218,-0x22a)]});return super[R(-0x120,-0x10c)](c);}['updateMessages'](c){function S(a,b){return P(b,a- -0x1db);}this[S(-0x90,-0x16e)][S(-0x188,-0x114)]['store'][S(-0x8e,0xc9)]=c;}get['chat'](){function T(a,b){return P(b,a-0x1c0);}return this[T(0x30b,0x2d2)]['chatBubbles'];}get[P(-0x13b,-0xd2)](){function U(a,b){return P(a,b-0x33e);}return this[U(0x456,0x489)][U(0x164,0x26c)];}get['sendButton'](){function V(a,b){return P(b,a-0x140);}return this['widgetMap'][V(0x6e,-0x50)]['triggers'][V(0x279,0x133)];}get[P(0x39,-0x46)](){function W(a,b){return P(b,a-0x117);}return this[W(0x107,0x186)][W(0xd1,0x22b)];}[P(0xd2,0x116)](c){function X(a,b){return P(a,b-0x199);}if(!this[X(0x2c8,0x305)]){this[X(0x19c,0x189)][X(0x74,0xc8)]=c;}}[P(-0x100,-0x9b)](c){function Y(a,b){return P(a,b- -0x91);}if(!this[Y(0x20a,0xdb)]){this[Y(0x5a,-0xa1)]['intro']=c;}}[P(0x19c,0x140)](c){function Z(a,b){return P(a,b- -0x1b0);}if(!this[Z(-0xdc,-0x44)]){this[Z(-0x239,-0x1c0)][Z(-0x240,-0x17c)]=c;}}[P(0x282,0x12e)](){function a0(a,b){return P(a,b-0x358);}if(!this['isConfiguring']){this[a0(0x37e,0x348)][a0(0x41e,0x516)]['now']();}}async[P(-0xf2,-0x11)](c){var d,e;function a1(a,b){return P(b,a- -0x1a0);}if(ObjectHelper['isPromise'](c)){const f=this[a1(-0x1b0,-0x124)][a1(-0xd8,-0x1ce)](),g=await c;f[a1(-0x278,-0x3a0)]=![];if(f[a1(-0x1a9,-0x193)]||!g){return;}await((d=this[a1(0x2d,-0xbe)])==null?void 0x0:d[a1(-0x170,-0x143)](this,g,f));const {text:h,...j}=g;f[a1(-0x26c,-0x28c)](j);if(this[a1(-0x32,-0xd)]){f[a1(-0x1b6,-0x298)]=!![];let {typeInterval:k}=this;if(h[a1(-0x1ee,-0x274)]>0x32){k/=0x2;}if(h[a1(-0x1ee,-0x2c6)]>0x1f4){k/=0xa;}(e=f[a1(-0x266,-0x357)])!=null?e:f['text']='';for(let l=0x0;l<h[a1(-0x1ee,-0xf2)];l++){let m=h[a1(-0x25b,-0x3a8)](l,l+0x1);if(m==='<'){while(!m[a1(-0x191,-0xf9)]('>')&&l<h[a1(-0x1ee,-0xf5)]){l++;m+=h[a1(-0x25b,-0x1a4)](l,l+0x1);}}else if(m==='&'){const n=h[a1(-0x25b,-0x23a)](l,l+0xa),o=n[a1(-0x7f,-0x1a5)](/&[a-zA-Z0-9#]+;/);if((o==null?void 0x0:o[0x0])&&o['index']===0x0){m+=o[0x0][a1(-0x25b,-0x373)](0x1);l+=o[0x0]['length']-0x1;}}f['text']+=m;await AsyncHelper[a1(-0x255,-0x236)](k);if(f[a1(-0x1a9,-0x27a)]){break;}}f[a1(-0x1b6,-0x184)]=![];}else{f[a1(-0x266,-0x1bc)]=h;}}else{this[a1(-0x1b0,-0xd3)][a1(-0x5d,-0x13)](c);}}[P(0x23f,0x16b)](){const c=this,{messageField:d}=c,{value:e}=d;function a2(a,b){return P(b,a-0x207);}if(e&&!c[a2(0x1fb,0x1c2)]['disabled']){c['addLocalMessage'](e);d[a2(0x189,0x213)]();c[a2(0x267,0x223)]({'source':d});c[a2(0x37f,0x353)](e);}}[P(0x62,-0x23)](c,d=![]){function a3(a,b){return P(b,a-0xdd);}const e=this[a3(0xcd,0x9f)][a3(0x220,0x108)]({'fromOther':![],'text':c,'audio':d});this[a3(0xc4,0xbd)](a3(0x1cd,0x238),{'text':c,'id':e['id'],'message':e});}[P(-0x7f,0x8a)](c){function a4(a,b){return P(b,a-0x24a);}this[a4(0x231,0x165)](a4(0x1a3,0x2fa),c);}[P(-0xbb,-0x1d)]({prompt:c}){function a5(a,b){return P(a,b-0x441);}this[a5(0x3ff,0x36f)][a5(0x44c,0x4e8)]=c;this[a5(0x384,0x4a1)]({'source':this[a5(0x300,0x36f)]});this[a5(0x317,0x36f)][a5(0x336,0x474)]();}['onOptionClick']({option:c}){function a6(a,b){return P(b,a- -0x12b);}this[a6(-0x144,-0x1ff)](a6(-0x3b,-0x8),{'text':c,'option':!![]});}[P(0x128,0x60)]({source:c}){function a7(a,b){return P(a,b- -0x15b);}this[a7(0xb7,-0x39)](!c[a7(-0x18f,-0xb4)]&&c[a7(-0x1ad,-0xb4)]!==0x0,a7(-0x69,0x1));}[P(0x195,0xa8)]({message:c,messageTools:d}){function a8(a,b){return P(b,a-0x3ce);}const {showTimestamp:e}=this;if(e){d[a8(0x362,0x48b)]={'class':a8(0x544,0x596),'text':DateHelper['format'](c[a8(0x362,0x4b4)],typeof e==='string'?e:'LT')};}}['toggleSendButtonState'](c,d){var e;const f=(e=this[a9(0x33,0x65)])!=null?e:this[a9(0x33,0x14b)]=new Set();function a9(a,b){return P(b,a- -0xe9);}if(c){f[a9(-0x4c,-0xf9)](d);}else{f[a9(-0x16b,-0x57)](d);}this[a9(-0xf5,-0x1fd)][a9(-0xe8,0x38)]=f[a9(-0x11e,-0xda)]>0x0;}[P(0x28f,0x178)](c){function aa(a,b){return P(b,a-0x263);}if((c==null?void 0x0:c['length'])>0x5){const d=aa(0x220,0x36c),e=localStorage[aa(0x3c8,0x3ec)](d),f=e?JSON[aa(0x2a0,0x32e)](e):[],g=f[aa(0x361,0x20b)](c);if(g!==0x0){if(g>0x0){f[aa(0x3d3,0x51c)](g,0x1);}f[aa(0x1dc,0x150)](c);localStorage[aa(0x3c0,0x26a)](d,JSON[aa(0x32f,0x44f)](f));}}this[aa(0x22c,0xef)]=0x0;}[P(0x14,0x162)](){function ab(a,b){return P(a,b-0x150);}var c;const d=this,e=localStorage[ab(0x40a,0x2b5)](ab(0xc9,0x10d)),f=e?JSON[ab(0xb0,0x18d)](e):[];if(f['length']){(c=d[ab(0x20b,0x119)])!=null?c:d[ab(0x19e,0x119)]=0x0;d[ab(0x15e,0x7e)][ab(0x15e,0x1f7)]=f[d[ab(0x213,0x119)]];d['onTextFieldInput']({'source':d[ab(0xde,0x7e)]});d[ab(0x174,0x119)]+=0x1;if(d['_promptHistoryIndex']>f[ab(0xcf,0x102)]-0x1){d[ab(0x1d3,0x119)]=0x0;}}}},__publicField(b,P(-0x115,-0xd9),P(0x135,0xa)),__publicField(b,P(0x121,0x6c),{'avatar':null,'intro':null,'examplePrompts':null,'messages':null,'bubbleTools':null,'showTimestamp':null,'typeInterval':0x19,'animateTyping':!![],'width':P(-0x9e,-0xad),'layout':P(0x11,0xfd),'items':{'chatBubbles':{'type':P(-0x3f,0xb9),'internalListeners':{'toolClick':P(0xf3,-0x4),'examplePromptClick':P(0x5b,0x153),'optionClick':'up.onOptionClick','beforeRenderMessage':P(0x13,-0xb6)}},'messageField':{'type':P(0x1ad,0x133),'placeholder':P(-0x176,-0x44),'clearable':{'cls':P(0x258,0x147)},'revertOnEscape':!![],'keyMap':{'Esc':P(-0x151,-0x7e),'Enter':P(-0x23,0x96),'ArrowUp':P(0x19e,0x10b)},'internalListeners':{'input':P(0x48,0xaf)},'triggers':{'send':{'cls':'b-icon\x20b-send-chat-msg\x20b-icon-circle-arrow-up','handler':P(0x1b1,0x96),'disabled':!![]}}}}}),b;};DomHelper[_cmpF(0x2a8,0x2ad)](_cmpF(0x537,0x515));var ChatPanel=class extends Panel[_cmpF(0x236,0x2ea)](ChatPanelMixin_default){};__publicField(ChatPanel,_cmpF(0x186,0x27c),_cmpF(0x369,0x2cd));__publicField(ChatPanel,_cmpF(0x34b,0x44d),_cmpF(0x18c,0x2dd));ChatPanel[_cmpF(0x2af,0x32a)]();ChatPanel[_cmpF(0x225,0x34e)]=_cmpF(0x29c,0x2cd);var ChatPopup=class extends Popup[_cmpF(0x1dd,0x2ea)](ChatPanelMixin_default){};__publicField(ChatPopup,'$name',_cmpF(0x1dd,0x2c7));__publicField(ChatPopup,_cmpF(0x569,0x44d),'chatpopup');__publicField(ChatPopup,_cmpF(0x440,0x3c1),{'autoClose':![],'autoShow':![],'closeAction':'hide','align':{'align':_cmpF(0x384,0x2a4),'offset':[0x14,0x14]}});ChatPopup['initClass']();ChatPopup[_cmpF(0x37e,0x34e)]='ChatPopup';var states={'open':_cmpF(0x45b,0x306),'closed':_cmpF(0x242,0x370),'voice':{'speaking':_cmpF(0x42d,0x3d3),'waiting':_cmpF(0x3ee,0x487),'active':_cmpF(0x3b6,0x501),'inactive':_cmpF(0x1ee,0x2ec)}};var ChatButton=class extends Button{constructor(...a){function ac(a,b){return _cmpF(a,b- -0x472);}super(...a);globalThis['el']=this[ac(0x126,-0x2c)];EventHelper['on']({'element':this[ac(0x4d,-0x2c)],'thisObj':this,'autoDetach':!![],'animationend':'onAnimationEnd','contextmenu':b=>this['trigger'](ac(-0x118,0x2c),b)});}[_cmpF(0x277,0x333)](a,b){function ad(a,b){return _cmpF(a,b- -0x253);}var c;return Widget[ad(0x330,0x2b0)](b,a?ObjectHelper[ad(0x250,0x2a2)]({'type':ad(0xda,0x8a),'owner':this,'internalListeners':{'visibilityChange':ad(0x1bd,0x1f1)}},!(a==null?void 0x0:a[ad(0x2f8,0x285)])&&{'type':ad(0x335,0x28f),'showAnimation':{'height':{'from':0x0,'to':a[ad(0x25e,0x182)]||ad(0x58,0x16b),'duration':ad(0x63,0xd5),'delay':'0s','keepStyle':!![]},'width':{'from':0x0,'to':ad(0x27,0x55),'duration':ad(0x1a9,0xd5),'delay':'0s','keepStyle':!![]}},'draggable':![]},a,this[ad(0x1c2,0x20e)][ad(0x2c0,0x211)]<0x258&&{'drawer':{'side':ad(0x168,0x2bb),'autoCloseDelay':-0x1},'width':ad(0xad,0x1d5),'height':0x12c,'type':((c=a[ad(0x1d0,0x1fa)])==null?void 0x0:c[ad(0x17b,0x10e)]('ai'))?ad(0x184,0x12b):ad(0x15,0x8a)}):null);}[_cmpF(0x525,0x4e8)](a){function ae(a,b){return _cmpF(a,b- -0x49);}this[ae(0x4fc,0x3da)](a,[ae(0x4c0,0x3fc),'audioMessage',ae(0x171,0x29a),ae(0x2b6,0x3f8)]);}[_cmpF(0x402,0x2b6)](...a){function af(a,b){return _cmpF(b,a-0x1a2);}var b,c;const d=this,e=(b=super[af(0x458,0x4ea)](...a))!=null?b:d[af(0x51b,0x63f)];if(e){if(e[af(0x5fd,0x4f8)]){e[af(0x419,0x4ff)]=e[af(0x5fd,0x64a)];}((c=e[af(0x4c5,0x414)])!=null?c:e[af(0x4c5,0x3f7)]={})[af(0x465,0x3cf)]=({source:f})=>{if(d[ag(0xfb,0xe0)]===states[ag(-0x12b,-0x9)]){return![];}function ag(a,b){return af(b- -0x5dc,a);}switch(d[ag(0x20d,0xe0)]){case states['closed']:f[ag(0x16f,0x21)]=e[ag(-0x301,-0x1c3)];break;case states[ag(-0xd,-0x9a)]['speaking']:f['html']='AI\x20speaking,\x20click\x20to\x20stop.\x20Right\x20click\x20to\x20open\x20chat.';break;case states[ag(-0xe1,-0x9a)]['active']:f[ag(-0x52,0x21)]='Recording,\x20click\x20to\x20stop.\x20Right\x20click\x20to\x20open\x20chat.';break;case states[ag(0x97,-0x9a)][ag(-0xc,-0xf9)]:f[ag(-0xfd,0x21)]=ag(-0x1b5,-0x11f);break;case states[ag(-0x4c,-0x9a)][ag(-0x1,0xce)]:f[ag(-0xa1,0x21)]=ag(-0x16f,-0xb0);}};}return e;}async['onInternalClick'](a){function ah(a,b){return _cmpF(a,b- -0x46e);}const {style:b}=this['chatPanel']['chat']['scrollable'][ah(-0x8c,-0x28)],{overflow:c}=b;switch(this['state']){case states[ah(0x8a,-0x3d)]:this[ah(-0x4e,0x3c)]();a[ah(-0xcc,0x82)]=!![];break;case states[ah(-0xe0,-0xd7)]:b[ah(-0x129,-0x1b9)]=ah(-0x165,-0x27);await this['open']();b['overflow']=c;a[ah(0x1a2,0x82)]=!![];break;}super[ah(0xc0,0x7c)](...arguments);}async[_cmpF(0x532,0x431)](){var a;function ai(a,b){return _cmpF(a,b- -0x1b8);}const {chatPanel:b}=this;await b[ai(0x103,0x1a5)](this[ai(0x16e,0x28e)]);(a=b[ai(0x266,0x28e)][ai(0x2b8,0x1e7)](ai(0x108,0x1c4)))==null?void 0x0:a[ai(0xbe,0x14d)]();}[_cmpF(0x5dc,0x4aa)](){function aj(a,b){return _cmpF(a,b-0x14c);}this['chatPanel'][aj(0x4ce,0x4ce)]();}['onVisibilityChange']({hidden:a}){function ak(a,b){return _cmpF(b,a-0x154);}this[ak(0x66e,0x738)]=a?states[ak(0x4eb,0x3df)]:states[ak(0x585,0x530)];}['onAnimationEnd'](a){function al(a,b){return _cmpF(a,b-0xa9);}if(a[al(0x595,0x489)]===al(0x2a8,0x32b)){this[al(0x548,0x4ef)][al(0x672,0x5b3)][al(0x430,0x536)](al(0x381,0x3a7),![]);}}[_cmpF(0x38d,0x3aa)](){function am(a,b){return _cmpF(b,a-0x51);}const {state:a,_savedState:b,element:c}=this,d=super[am(0x3fb,0x308)]();Object[am(0x3b1,0x3b4)](d['class'],{['b-'+a]:Boolean(a),['b-'+b+am(0x513,0x647)]:Boolean(b)});if(c&&b&&b!==a){c[am(0x55b,0x4fe)][am(0x4de,0x41c)](am(0x34f,0x2cb),!![]);}this[am(0x3dd,0x381)]=a;return d;}};__publicField(ChatButton,_cmpF(0x371,0x27c),_cmpF(0x2a0,0x2cb));__publicField(ChatButton,'type',_cmpF(0x50f,0x3cd));__publicField(ChatButton,'configurable',{'icon':_cmpF(0x411,0x3c7),'chatPanel':{'$config':[_cmpF(0x40e,0x39d)],'value':{}},'state':states[_cmpF(0x2b6,0x397)]});ChatButton[_cmpF(0x1db,0x32a)]();function _cmpb(a,b){const c=_cmpa();_cmpb=function(d,e){d=d-0x80;let f=c[d];return f;};return _cmpb(a,b);}ChatButton[_cmpF(0x2b2,0x34e)]='ChatButton';var aiSpaceRe=/[ \t]+/g;var AIUtilities=class{};__publicField(AIUtilities,_cmpF(0x4c4,0x469),formatText);__publicField(AIUtilities,'getConditionBlock',getConditionBlock);__publicField(AIUtilities,_cmpF(0x302,0x2f0),createConditionTool);function _cmpF(a,b){return _cmpb(b-0x1f4,a);}__publicField(AIUtilities,_cmpF(0x3e4,0x29e),createBasicTool);__publicField(AIUtilities,_cmpF(0x2e2,0x2ef),createGetRecordsTool);function formatText(a,...b){let c=0x0,d=b[an(0xab,0x1b2)]((e,f)=>{let g=a[f];if(Array['isArray'](e)){g+=e[ao(0x29f,0x1c3)]((h,j)=>h+=(typeof j==='string'?j[ao(0x459,0x378)]():j)+'\x0a','');}else{if(e===void 0x0){e='';}g+=typeof e===ao(0x265,0x3b4)?e[ao(0x459,0x3d0)]():e;}c++;function ao(a,b){return an(a-0x29c,b);}return g;})[an(-0x39,-0x16e)]('');if(c<=a['length']){d+=a[a[an(-0x3c,-0x115)]-0x1];}function an(a,b){return _cmpF(b,a- -0x343);}return d[an(0x183,0x255)](aiSpaceRe,'\x20')[an(0x1bd,0x136)]();}function getConditionBlock({modelName:modelName=_cmpF(0x4d6,0x454),doWhat:doWhat=_cmpF(0x5a7,0x465),pluralize:a}={}){function ap(a,b){return _cmpF(a,b- -0x2a7);}return{'type':ap(0x1a9,0x217),'description':ap(0xe7,0x182)+(modelName+(a?'s':''))+'\x20'+doWhat,'properties':{'type':{'type':ap(-0x4,0x65),'description':ap(0x192,0x4e)},'conditions':{'type':ap(0xf1,0x3e),'description':'Each\x20item\x20represents\x20single\x20condition.\x20You\x20can\x20add\x20multiple\x20conditions\x20in\x20this\x20array','items':{'type':ap(0xf0,0x217),'description':ap(0x2,0xee),'properties':{'field':{'type':ap(-0xc1,0x65),'description':ap(0xb3,0x154)},'operator':{'type':ap(0x1a7,0x65),'description':formatText`The operator to use for this condition. These are available:
                                                contains
                                                *
                                                = 
                                                !=
                                                <
                                                >
                                                startsWith
                                                endsWith`},'value':{'type':ap(0x131,0x65),'description':ap(0x1e8,0x1fe)}},'required':[ap(0x1ec,0x1e2),ap(0xf8,0x195),ap(0x1cb,0x155)]}}},'required':[ap(0xb2,0x202),'type']};}function createBasicTool({parameters:a,properties:b,required:c,available:available=!![],fn:d,description:e,...f}){if(!d||!e||a&&b){throw new Error(aq(0x3dd,0x406));}const g={'description':e,'available':available,'strict':!![],'fn':d,...f};if(b){g[aq(0x20a,0xc8)]={'type':aq(0x3e2,0x338),'properties':b,'required':c};}else if(a){g[aq(0x20a,0x2c2)]=a;}function aq(a,b){return _cmpF(b,a- -0xdc);}return g;}function createConditionTool({properties:a,conditions:b,required:required=[],...c}){if(!(b==null?void 0x0:b[ar(0x558,0x404)])){throw new Error(ar(0x42b,0x57d));}const d=b[ar(0x399,0x404)]===0x1&&!a;a!=null?a:a={};let e={'properties':a,'required':required};function ar(a,b){return _cmpF(a,b-0xfd);}b[ar(0x33b,0x469)](f=>{var g;(g=f[as(0x21c,0x22c)])!=null?g:f[as(0x148,0x22c)]=StringHelper[as(0x273,0x244)](f['modelName'])+as(0x3b0,0x314);a[f[as(0x24d,0x22c)]]=getConditionBlock(f);required[as(0x331,0x47e)](f[as(0x112,0x22c)]);function as(a,b){return ar(a,b- -0x14f);}if(d){f[as(0x3fe,0x2f1)]=!![];e={'parameters':a[f[as(0x108,0x22c)]]};}});return createBasicTool({...c,...e,'conditions':b});}function createDeleteRecordsTool({modelName:a}){function at(a,b){return _cmpF(b,a- -0x1a4);}return createConditionTool({'description':at(0x195,0x177)+a+at(0x140,0xe7),'conditions':[{'modelName':a,'doWhat':at(0x1ea,0x1c5),'includeReadOnly':![]}],'available':b=>!b[at(0x134,-0x1b)][at(0x1b0,0x8b)],'fn'({records:b}){function au(a,b){return at(b- -0x368,a);}this[au(-0x12c,-0x1e5)][a][au(-0x32b,-0x1fd)]['remove'](b);return au(-0x5,-0x107)+b[au(-0x1c1,-0x205)]+'\x20'+a+'s';}});}function createUpdateRecordsTool({modelName:a,beforeRecordUpdate:b}){function av(a,b){return _cmpF(b,a- -0x119);}return createConditionTool({'description':'Use\x20this\x20to\x20update\x20'+a+av(0x2fd,0x2af),'conditions':[{'modelName':a,'doWhat':av(0x18d,0x6e),'includeReadOnly':![]}],'properties':{'changes':{'type':av(0x1cc,0x121),'description':'An\x20array\x20of\x20changes\x20to\x20apply\x20to\x20the\x20'+a,'items':{'type':av(0x3a5,0x373),'properties':{'field':{'type':av(0x1f3,0x28a),'description':'The\x20field\x20on\x20which\x20to\x20apply\x20the\x20change'},'value':{'type':'string','description':av(0x1a5,0x2ac)},'setOperator':{'type':av(0x1f3,0x271),'description':formatText`Use this to be able to make changes relative to the present value. For example appending a text to the end or doubling the current number value. Available operators:
                                        + - add a number value (can be negative)
                                        * - multiply by this value
                                        "append" - add this string to the end
                                        "prepend" - add this string to the beginning
                                        "set" - overwrite the current value with the new one (this is the default operator)
                                        "setDatePart" - change the date part of date values, preserving the current time value of the ${a}
                                        "addDuration" - add a duration to a date field. must be expressed like "X unit", for example 2 days, 1 year, 8 hours etc.
                                        `}},'required':[av(0x370,0x4b1),av(0x2e3,0x357)]}}},'required':['changes'],'available':c=>!c[av(0x1bf,0x2c0)]['readOnly'],'fn'({args:c,promptContext:d,records:e}){var f;const g=new Map(),h=c[aw(0x404,0x3ea)],i=[];function aw(a,b){return av(a-0x1a3,b);}for(const j of e){const k={};for(const {field:l,value:m,setOperator:setOperator=aw(0x313,0x2d8)}of h){const n=j[aw(0x3f5,0x378)][l],o=j[aw(0x316,0x40f)](l),p=(f=setOperator&&setOperator==='set')!=null?f:!![];let q=o;if(n[aw(0x4d7,0x5d4)]===aw(0x50e,0x517)){if(p||setOperator===aw(0x467,0x369)){q=new Date(m);if(!p){DateHelper[aw(0x48a,0x567)](q,o);}}else if(setOperator===aw(0x52d,0x3e5)||setOperator==='+'){const r=DateHelper[aw(0x385,0x3f0)](m);q=DateHelper[aw(0x47c,0x3d2)](o,r);}}else if(n[aw(0x4d7,0x4a2)]===aw(0x433,0x492)){const s=parseFloat(m);if(p){q=s;}else if(setOperator==='*'){q*=s;}else{q+=s;}}else if(n[aw(0x4d7,0x4de)]==='boolean'){q=!!m;}else{if(p){q=m;}else if(setOperator==='prepend'){q=m+o;}else{q+=m;}}if(q!==o){if(!g['has'](j)){g[aw(0x313,0x226)](j,k);}k[l]=q;}}b==null?void 0x0:b({'modelName':a,'record':j,'toSet':k,'errors':i});}if(i['length']){return aw(0x375,0x484)+i[aw(0x394,0x428)](',\x20');}g[aw(0x3f6,0x2d0)]((t,u)=>u['set'](t));if(i[aw(0x391,0x3c9)]){return aw(0x375,0x30d)+i['join'](',\x20');}d[aw(0x452,0x39f)]['push'](...e);return aw(0x444,0x4e7)+e[aw(0x391,0x2f0)]+'\x20'+a+aw(0x4da,0x3eb)+e[0x0][aw(0x5af,0x4bf)][aw(0x368,0x285)]['at'](-0x1)+')';}});}function createGetRecordsTool({modelName:a,defaultSortField:b}){function ax(a,b){return _cmpF(a,b- -0x358);}return createConditionTool({'description':'Use\x20this\x20to\x20get\x20a\x20specific\x20set\x20of\x20'+a+ax(-0x1b1,-0xdd)+a+'s.\x20Dont\x20ever\x20use\x20when\x20creating\x20conditions.','conditions':[{'modelName':a,'doWhat':''}],'properties':{'fields':{'type':ax(-0xf9,-0x73),'description':ax(-0x67,0x3e)+a+ax(0x1a4,0x1a0),'items':{'type':ax(0xb7,-0x4c),'description':ax(0x118,0x57)}},'sortField':{'type':'string','description':ax(0x19e,0x118)+a+ax(-0x14d,-0x99)},'sortDirection':{'type':ax(0xd,-0x4c),'description':'ascending\x20or\x20descending,\x20use\x20only\x20if\x20you\x20provide\x20a\x20sortField'},'limit':{'type':'number','description':ax(0x7f,0x187)+a+ax(-0xa,-0xde)}},'statusDescription':ax(0x287,0x196)+a+'s','required':[ax(-0x18c,-0x7c)],async 'fn'({args:{sortField:sortField=b,sortDirection:c,limit:d,fields:e},records:f}){if(sortField&&sortField in f[0x0]){const g=!(c==null?void 0x0:c[ay(-0x15d,-0x29f)]()['startsWith'](ay(-0x6d,0x4b)));f[ay(-0x1e0,-0x101)](({[sortField]:h},{[sortField]:i})=>{if(typeof h===az(-0x2b9,-0x260)){return g?h>i:i>h;}function az(a,b){return ay(a- -0x120,b);}return g?h-i:i-h;});}function ay(a,b){return ax(b,a- -0x14d);}if(d){if(typeof d===ay(-0x199,-0x134)){d=parseInt(d,0xa);}if(d>0x0){f=f[ay(-0x20b,-0x133)](0x0,d);}}return JSON[ay(-0x84,-0xf7)]({[a+'s']:f[ay(-0xb7,-0x1b3)](h=>{const i={};function aA(a,b){return ay(a-0x3cb,b);}for(const j of e){i[j]=h[aA(0x1b2,0x171)](j);if(i[j]instanceof Date){i[j]=this[aA(0x3bc,0x45c)](i[j]);}}return i;}),'conditionId':f[0x0]['meta'][ay(-0x1c7,-0xd6)]['at'](-0x1),'count':f[ay(-0x19e,-0x80)]});}});}function createFilterTool({modelName:a,productName:b,storeProperty:storeProperty='store'}){const c=StringHelper[aB(-0xa1,-0x94)](a)+aB(0xf7,0x3c);function aB(a,b){return _cmpF(a,b- -0x32a);}return createBasicTool({'description':'Use\x20this\x20to\x20filter\x20the\x20'+a+aB(0x26c,0x183)+b+'.\x20Only\x20use\x20when\x20user\x20asks\x20to\x20filter\x20the\x20dataset,\x20never\x20to\x20remove','parameters':{'type':'object','properties':{[c]:getConditionBlock({'modelName':a,'doWhat':aB(0xbd,0x21)}),'clearExisting':{'type':aB(0x204,0x10d),'description':'Pass\x20true\x20to\x20clear\x20existing\x20filters\x20before\x20applying\x20the\x20new\x20ones'}}},'state':{'path':storeProperty+aB(0x63,0x12c),'empty':[]},'fn'({args:d}){function aC(a,b){return aB(a,b- -0x51);}const {store:e}=this['models'][a];if(d[aC(0xe3,-0x44)]){e[aC(-0x127,-0x6b)]();}const f=this[aC(-0x16f,-0x18)](a,d[c]);e[aC(-0xb3,0x6)](f);return aC(0x191,0xb5);}});}AIUtilities['_$name']=_cmpF(0x39a,0x3cc);var DefaultAgent=class extends Base[_cmpF(0x229,0x2ea)](Pluggable_default){constructor(){super(...arguments);__publicField(this,'txt',formatText);}[_cmpF(0x483,0x496)](a){function aD(a,b){return _cmpF(b,a- -0x497);}return DateHelper[aD(0x31,-0x63)](a,this['dateFormat']);}get[_cmpF(0x3ab,0x327)](){function aE(a,b){return _cmpF(b,a- -0xdf);}return this[aE(0x34d,0x3fc)];}[_cmpF(0x358,0x2fc)](a,b){let c=a,d=![];if(a&&!a['isApiPlugin']){c=a[aF(0x339,0x30f)];d=!![];}let e=this[aF(0x132,0x232)](c);function aF(a,b){return _cmpF(b,a- -0x17d);}if(a){if(!e){e=this[aF(0x277,0x124)](a,d?a:null);b==null?void 0x0:b[aF(0x13f,0x217)]();}else if(d){ObjectHelper['assign'](e,a);}return e;}else{e==null?void 0x0:e[aF(0x13f,0x11c)]();return![];}}[_cmpF(0x5a8,0x509)](a,b){function aG(a,b){return _cmpF(a,b-0x41);}var c;for(const d of b){if((c=d['toolCalls'])==null?void 0x0:c[aG(0x29c,0x348)]){for(let {name:e}of d[aG(0x6bb,0x561)]){if(e['includes']('$$')){e=this[aG(0x675,0x545)](e);}if(!this[aG(0x3e2,0x2d4)](this['tools'][e])){return![];}}}}return!![];}get[_cmpF(0x33e,0x29b)](){var a,b;const c=(a=this[aH(0x25d,0x308)])==null?void 0x0:a[aH(0x2aa,0x2fe)]((e,f)=>{function aI(a,b){return aH(b,a- -0x3ca);}const g=[],h=[];f[aI(-0xa6,-0xa4)](i=>(typeof i===aI(-0x106,-0x14a)?g:h)[aI(0xbe,0x1c3)](i));if(this['shouldIncludeTrainingDataEntry'](g,h)){e['push'](h);}return e;},[]);function aH(a,b){return _cmpF(a,b- -0x48);}if(c==null?void 0x0:c[aH(0x411,0x2bf)]){(b=this[aH(0x454,0x33c)])==null?void 0x0:b[aH(0x348,0x33d)](this,c);return{'role':aH(0x5c7,0x4c8),'content':'Here is an array of training data which contains a number of example conversations. Each conversation contains a user query and the expected outcome. Always follow the pattern from the training data, do not simplify:\n\n'+this[aH(0x46f,0x4bc)](JSON[aH(0x47c,0x3d9)](c))};}}get['systemMessageIntro'](){return'';}get[_cmpF(0x2bb,0x408)](){function aJ(a,b){return _cmpF(a,b- -0x4a6);}const a=[aJ(-0x62,-0x49)+this[aJ(-0x2db,-0x1fc)]+')'];ObjectHelper[aJ(-0x35,-0x13a)](this[aJ(-0x10f,-0x17f)],(b,c)=>{var d;a[aK(-0xc6,-0x19)]('',''+c);if(b[aK(-0x1b3,-0xef)]){a[aK(-0xc6,-0x10a)](b[aK(-0x1b3,-0xce)]);}a[aK(-0xc6,-0x173)](aK(-0xcf,0x0)+c+':');function aK(a,b){return aJ(b,a- -0xf0);}b[aK(-0x287,-0x144)]['modelClass']['allFields']['forEach'](e=>{var f;function aL(a,b){return aK(a-0x4ae,b);}if(e[aL(0x2fb,0x443)]&&!((f=b[aL(0x3f2,0x30d)])==null?void 0x0:f[aL(0x27c,0x323)](e[aL(0x196,0x16e)]))){a['push'](aL(0x41f,0x344)+e[aL(0x196,0x148)]+aL(0x1ed,0x302)+e['description']);}});ObjectHelper['forEach'](b[aK(-0x1a1,-0x26a)],(e,f)=>{function aM(a,b){return aK(b- -0x1f,a);}if(e[aM(-0x199,-0x1d2)]){a[aM(-0x23d,-0xe5)](aM(-0x11f,-0xae)+f+aM(-0x1d8,-0x2e0)+e[aM(-0x266,-0x1d2)]);}});(d=b['fields'])==null?void 0x0:d[aK(-0x22a,-0x1cd)](e=>{function aN(a,b){return aK(b-0x58,a);}a['push'](aN(0xcc,-0x37)+e[aN(-0x2e4,-0x2c0)]+aN(-0x367,-0x269)+e[aN(-0x161,-0x15b)]);});});return a[aJ(-0x167,-0x19c)]('\x0a');}get['systemMessageTools'](){function aO(a,b){return _cmpF(a,b- -0xf4);}return this[aO(0x359,0x397)]`
            When updating, removing or adding data, you have no access to the existing data yourself. All data change 
            tool calls should instead use conditions. A condition could be built for example matching the Name field
            of a record with a * operator. Always use a condition without calling data fetching tools first, and if 
            your condition fails to match, you can try fetching data.
            `;}get[_cmpF(0x1e9,0x2f7)](){function aP(a,b){return _cmpF(a,b- -0x239);}return this[aP(0x309,0x252)]`If the most important part of an answer is a number, please highlight that number`;}get['systemMessage'](){const a=this,b=ObjectHelper[aQ(0x35c,0x390)](a[aQ(0x411,0x45e)])['sort']((e,f)=>e['weight']-f['weight']),c=b[aQ(0x3b1,0x2c5)](({fn:e})=>typeof e==='string'?a[e]:e()),d=a[aQ(0x44e,0x3e2)]`${c[aQ(0x344,0x493)](e=>e==null?void 0x0:e['length'])[aQ(0x2cd,0x3fe)]('\x0a\x0a')}`;function aQ(a,b){return _cmpF(b,a- -0x3d);}return{'content':d,'role':aQ(0x4d3,0x5ea)};}[_cmpF(0x565,0x504)](a){function aR(a,b){return _cmpF(a,b- -0x215);}return a[aR(0x350,0x2b1)](/\$\$productName/g,this[aR(0x191,0x95)]);}get[_cmpF(0x240,0x2e1)](){const a=[];for(const b in this['tools']){const c=this[aS(0x277,0x11d)][b],d=this['isToolAvailable'](c),{description:e,parameters:f}=c;if(d){a['push']({'name':b,'description':e,'parameters':f});}}function aS(a,b){return _cmpF(b,a- -0xd);}return a;}[_cmpF(0x3ad,0x293)](a){function aT(a,b){return _cmpF(a,b- -0x1d);}return a&&(aT(0x2c2,0x2d4)in a?typeof a[aT(0x1fe,0x2d4)]===aT(0x316,0x35e)?a[aT(0x32c,0x2d4)]['call'](this,this):Boolean(a[aT(0x1cc,0x2d4)]):!![]);}['sendMessages']({messages:a,promptContext:b,newThread:newThread=![]}){var c;const d=this,{manageChatHistory:e}=d,f=(c=d[aU(-0x21a,-0x111)])!=null?c:d['history']=[],g={'messages':a,'systemMessages':[d['systemMessage']]};if(e){if(newThread){f[aU(-0x2b,-0xac)]=0x0;}f[aU(0x238,0x11d)](...a);a[aU(0x20f,0x112)](0x0,a[aU(-0x5f,-0xac)],...f);}else{g[aU(0xe,0xba)]=newThread;}const h=d[aU(-0x231,-0x118)];if(h){g[aU(-0x12,-0x9e)][aU(0xee,0x11d)](h);}if(d[aU(-0x63,-0x82)]){g['systemMessages'][aU(0x79,0x11d)]({'role':aU(0x27e,0x15d),'content':d['getState']()});}const i=d[aU(-0x216,-0xd2)];if(i[aU(-0xd7,-0xac)]){g['tools']=i;}function aU(a,b){return _cmpF(a,b- -0x3b3);}const j=performance['now'](),k=b[aU(0x123,0x28)]=d[aU(-0x57,0x1b)](g);return k[aU(0x1a6,0x83)](l=>{const m=l[aV(0x2a4,0x3d3)][aV(0x270,0x3ab)](aV(0x29f,0x253)),n=l[aV(0x2a4,0x260)]['get'](aV(0x25e,0x332)),o=performance['now']()-j,p=d[aV(0x387,0x4cc)](l);d[aV(0x304,0x1ef)]&&console[aV(0x229,0x19c)](aV(0x19b,0x121)+o+'\x20ms\x20where\x20backend\x20was\x20working\x20for\x20'+n+'s\x20including\x20waiting\x20for\x20AI\x20response\x20for\x20'+m+'s');if(e){f[aV(0x39b,0x28b)](p);}function aV(a,b){return aU(b,a-0x27e);}return p;})[aU(-0x22,0xab)](l=>{function aW(a,b){return aU(b,a-0x4ff);}var m;if(l['name']!=='AbortError'){(m=d[aW(0x5ed,0x6e7)])==null?void 0x0:m[aW(0x4d1,0x528)](d,l);throw l;}})[aU(0x1ce,0x83)](l=>d[aU(-0xff,0x44)](l,b));}[_cmpF(0x4a7,0x3ce)](a){var b;const c=this;if(c[aX(0x58b,0x4ed)]){a[aX(0x58b,0x576)]=c[aX(0x58b,0x635)];}if(c[aX(0x542,0x5a7)]!=null){a[aX(0x542,0x5ff)]=c[aX(0x542,0x500)];}if(c[aX(0x56d,0x509)]!=null){a['max_tokens']=c[aX(0x56d,0x572)];}function aX(a,b){return _cmpF(b,a-0xf8);}(b=this[aX(0x377,0x265)])==null?void 0x0:b[aX(0x47d,0x362)](this,a);return AjaxHelper[aX(0x4c6,0x493)](c[aX(0x50c,0x63d)],a,{'parseJson':!![],...c[aX(0x584,0x4ac)]});}async['prompt'](a,b,c){function aY(a,b){return _cmpF(a,b-0x1b2);}b!=null?b:b=this['createPromptContext']();const d=await this[aY(0x4f2,0x4db)]({'messages':[{'content':a,'role':aY(0x690,0x5b8)}],'promptContext':b,'newThread':c});return{'text':d,...b};}[_cmpF(0x1b9,0x2d1)](){return{'highlight':[],'promissory':new Promissory()};}[_cmpF(0x4a1,0x4bc)](a){function aZ(a,b){return _cmpF(a,b-0x95);}return a[aZ(0x5e8,0x563)];}async['processResponse'](a,b){var c,d,e,f;const g=this;g['shouldAbort'](a,b);if((c=a[b0(0x6a4,0x64f)])==null?void 0x0:c[b0(0x37a,0x436)]){const h=[];for(const j of a['toolCalls']){const k=j['arguments'],l=j[b0(0x4c6,0x3ad)],m=g[b0(0x3d0,0x3b3)][l];if(m){const {conditions:n}=m;let o,p;g[b0(0x37f,0x3af)]&&console[b0(0x5be,0x48d)](b0(0x49b,0x3db)+l,k);if(n==null?void 0x0:n[b0(0x496,0x436)]){for(const q of n){const r=(d=k[q[b0(0x36b,0x3ad)]])!=null?d:k;let s=g['processRecordsRequest'](q,r);if(!s[b0(0x530,0x436)]){o=b0(0x288,0x3c4)+q['modelName']+b0(0x6a7,0x5b4);const t=g['detectConditionErrors'](q,r);if(t){o+='\x0a'+t;}break;}if(q[b0(0x589,0x4af)]===![]){s=s['filter'](u=>!u[b0(0x3db,0x483)]);if(!s[b0(0x2f0,0x436)]){o=b0(0x4b7,0x5e4)+m['conditionModelName']+b0(0x505,0x43a);break;}}if(q[b0(0x5aa,0x472)]||n[b0(0x32a,0x436)]===0x1){p=s;}else{p!=null?p:p={};p[q['name']]=s;}}}if(!o){(e=g['beforeToolCall'])==null?void 0x0:e[b0(0x4f3,0x4b4)](g,{'toolConfig':m,'promptContext':b,'response':a,'toolName':l});o=await m['fn']['call'](g,{'args':k,'promptContext':b,'toolCall':j,'toolConfig':m,'records':p,'response':a});}g['debugMode']&&console[b0(0x52f,0x48d)](l+b0(0x4d6,0x4f9),/^[[{]/[b0(0x571,0x58b)](o)?JSON['parse'](o):o);g[b0(0x5a4,0x5ca)](o,b);h[b0(0x4cc,0x5ff)]({'id':j['id'],'content':o,'role':'tool','name':l});}}if(b[b0(0x5d0,0x5e0)]){return b[b0(0x606,0x5e0)];}const i=await g[b0(0x4b2,0x458)]({'messages':h,'promptContext':b});await((f=this[b0(0x54f,0x487)])==null?void 0x0:f[b0(0x417,0x4b4)](this,b,a));return i;}function b0(a,b){return _cmpF(a,b-0x12f);}return a['content'];}[_cmpF(0x3e2,0x363)](a,b){var c;const d=[],{store:e,relations:f}=this[b1(0x165,0x1df)][a],g=f&&ObjectHelper[b1(0x15e,0x251)](f,b1(0x3e8,0x2c5));if((c=b==null?void 0x0:b[b1(0x2df,0x361)])==null?void 0x0:c[b1(0x9b,0x1bf)]){const h=b[b1(0x2fb,0x305)]==='any',i=!h&&b['conditions'][b1(0x238,0x180)](j=>j[b1(0x2fc,0x341)]===b1(0x24e,0x32b));for(const j of b['conditions']){let {field:k,operator:l,value:m}=j,n=![],o=![];if(k==='durationUnit'){continue;}if(typeof m===b1(0x1a4,0x1c4)&&m[b1(0x258,0x219)]('[')){m=JSON['parse'](m);n=!![];}if(l==='contains'){l='*';}if(k==='duration'&&i){k=b1(0x1b4,0x27d);m=new Duration(m,i[b1(0x3da,0x2b4)]);}if((g==null?void 0x0:g[b1(0x115,0x1bf)])&&k[b1(0x16e,0x21c)]('.')){for(const {property:p,relatedModelName:q}of g){const [r,s]=k[b1(0x31d,0x1d9)]('.');if(r===p||r+'s'===p||r===q||r[b1(0x1fa,0x200)]()===q['toLowerCase']()){const t=this[b1(0x2c4,0x1df)][q][b1(0xda,0x1c7)],u=t[b1(0x263,0x3bd)]['fieldMap'][s],v=new CollectionFilter({'property':s,'operator':u[b1(0x346,0x305)]==='string'&&l==='='?'*':l,'value':!n&&(u==null?void 0x0:u[b1(0x498,0x363)])?u[b1(0x286,0x363)](m):m}),w=x=>{function b2(a,b){return b1(b,a- -0x122);}const y=x[p];if(y==null?void 0x0:y[b2(0x1af,0x1e3)]){return v['defaultFilterBy'](y);}else if(y instanceof Array){return y['some'](z=>v[b2(0x9f,0xdc)](z));}};w['or']=h;d[b1(0x4ce,0x388)](w);o=!![];break;}}}if(!o){const x=e[b1(0x291,0x3bd)]['fieldMap'][k],y={'property':k,'operator':l,'or':h,'caseSensitive':![]};if(k===b1(0x1a9,0x2dc)){d['push'](z=>{var A;function b3(a,b){return b1(b,a- -0x40f);}return(A=z['meta'][b3(-0x279,-0x27e)])==null?void 0x0:A['includes'](m*0x1);});continue;}if(!x){y['value']=m;}else{if(x[b1(0x1d0,0x305)]===b1(0x218,0x1c4)&&l==='='){y['operator']='*';}else if(x[b1(0x2e9,0x305)]===b1(0x2ce,0x33c)&&m[b1(0x23b,0x1bf)]<0xb&&(l==='='||l==='*'||l===b1(0x2ad,0x219))){y[b1(0x208,0x2f4)]=b1(0x33c,0x273);}else if(x[b1(0x3f8,0x305)]==='date'&&m[b1(0x25d,0x1bf)]<0xb&&l==='<='){y[b1(0x202,0x2f4)]='<';n=!![];m=x[b1(0x3a4,0x363)](m);m=DateHelper[b1(0x315,0x2aa)](m,0x1,'day');}else if(x[b1(0x254,0x305)]===b1(0x287,0x154)&&k==='id'&&l==='*'){y[b1(0x1d4,0x2f4)]='=';}if(y[b1(0x2ff,0x2f4)]==='*'){y[b1(0x37f,0x2f4)]=b1(0x178,0x21c);}if(x[b1(0x1cc,0x305)]===b1(0x267,0x19d)){const z=new CollectionFilter(y),A=B=>B[k][b1(0x24a,0x159)](C=>z[b1(0xe1,0x1c1)]({[k]:C}));d[b1(0x234,0x388)](A);continue;}else if(l===b1(0x267,0x252)){y['value']=m['map'](B=>{var C,D;function b4(a,b){return b1(b,a- -0x2af);}return(D=(C=x[b4(0xb4,-0x40)])==null?void 0x0:C[b4(-0x72,-0x126)](x,B))!=null?D:B;});}else{y[b1(0x380,0x2b4)]=!n&&x[b1(0x3d8,0x363)]?x[b1(0x2ae,0x363)](m):m;}}d[b1(0x30c,0x388)](new CollectionFilter(y));}}}function b1(a,b){return _cmpF(a,b- -0x148);}return d;}[_cmpF(0x337,0x365)](a,b){function b5(a,b){return _cmpF(b,a- -0x56c);}var c,d,e;const f=this,{modelName:g}=a,{store:h}=f[b5(-0x245,-0x37c)][g],i=f['processConditions'](g,b),j=(c=f[b5(-0x8e,0x27)])==null?void 0x0:c['call'](f,g,i),{allRecords:k}=h,l=[];let m;for(const n of k){if(n[b5(-0x131,-0xc9)]||(j==null?void 0x0:j(n))===![]){continue;}let o=!![],p=null;for(const q of i){if(p===![]&&!q['or']){o=![];break;}if(p===!![]&&q['or']){o=!![];break;}if(q['isCollectionFilter']){p=q['defaultFilterBy'](n);}else{p=q(n);}if(q===i['at'](-0x1)){o=p;}}if(o){l[b5(-0x9c,0xa5)](n);m!=null?m:m=f[b5(-0x254,-0x2da)](a,b);((e=(d=n[b5(-0x47,-0xf1)])['conditionIds'])!=null?e:d[b5(-0x28e,-0x1df)]=[])[b5(-0x9c,-0x4)](m);}}return l;}['saveCondition'](a,b){var c,d;const e=this;(c=e[b6(-0xcd,-0x82)])!=null?c:e[b6(-0xcd,-0x212)]=0x0;e[b6(-0xcd,-0x45)]+=0x1;(d=e['$conditionHistory'])!=null?d:e['$conditionHistory']=[];if(a&&b){e['$conditionHistory'][b6(0xf6,0x206)]({'conditionConfig':a,'conditionArgs':b,'id':e[b6(-0xcd,-0x12)]});}function b6(a,b){return _cmpF(b,a- -0x3da);}return e[b6(-0xcd,-0x202)];}[_cmpF(0x529,0x49b)](a,b){var c;let d=(c=this['clientShouldAbort'])==null?void 0x0:c['call'](this,a,b);function b7(a,b){return _cmpF(a,b-0x73);}if(!d){if(this[b7(0x544,0x56c)]){d=b7(0x610,0x537);}else if(!a){d=b7(0x36f,0x3ad);}}if(d){this['debugMode']&&console['log']('Aborted',d);throw Error(d);}}[_cmpF(0x546,0x4e9)](a,b){function b8(a,b){return _cmpF(b,a- -0x390);}var c;const d=(c=this['$conditionHistory'])==null?void 0x0:c[b8(-0xf,0xa5)](e=>e[b8(-0x1e,0x97)][b8(0xde,-0x16)]===a[b8(0xde,0x18f)]&&ObjectHelper['isEqual'](e['conditionArgs'],b,!![],!![]));if(d==null?void 0x0:d[b8(-0x89,-0x5c)]){return b8(0x17d,0xd9)+d['at'](-0x1)['id']+b8(-0x21,0x2d);}if(b[b8(0xbd,-0x4c)]===b8(0x29,0xb0)&&b['conditions']['length']>0x1){const e=[];for(const {field:f,operator:g}of b[b8(0x119,0x16d)]){if(g==='='){if(e['includes'](f)){return b8(0x147,0x22e);}e['push'](f);}}}}get[_cmpF(0x38c,0x284)](){function b9(a,b){return _cmpF(b,a- -0x503);}const a=this,{productName:b}=a,c=DomHelper[b9(-0xc3,-0x79)]?b9(-0x125,-0x1ee):b9(-0x206,-0x1be);return{'changeTheme':{'description':b9(-0x157,-0x179)+c+b9(-0xce,-0x1ac)+b,'fn'(){DomHelper[ba(0x4fd,0x4a2)]();function ba(a,b){return b9(b-0x5dc,a);}return ba(0x464,0x509);}},[b9(-0x260,-0x1e6)+b]:{'description':b9(-0x21b,-0x10d)+b,'available':Boolean(a['reload']),async 'fn'(){function bb(a,b){return b9(a-0x6db,b);}a[bb(0x47b,0x43b)]();return bb(0x608,0x5b1);}},'undo':{'description':b9(-0xe5,-0x18c),'noStm':!![],'available':()=>this[b9(-0x48,-0xdb)]&&this['undo'][b9(-0x212,-0xc0)](),async 'fn'(){function bc(a,b){return b9(b-0xbe,a);}await this[bc(0x89,0x76)]['fn']();return bc(0x95,-0x15);}},'endVoiceConversation':{'description':'Use\x20this\x20to\x20stop\x20recording\x20a\x20conversation\x20when\x20the\x20user\x20tells\x20you\x20to\x20end\x20it\x20(or\x20says\x20goodbye)','available':()=>{function bd(a,b){return b9(a-0x43f,b);}var d;return(d=this[bd(0x214,0x332)][bd(0x423,0x2e0)]['ai'])==null?void 0x0:d[bd(0x1f5,0x224)];},async 'fn'(){function be(a,b){return b9(b- -0xb2,a);}this[be(-0x23a,-0x2dd)]['features']['ai'][be(-0x43f,-0x2fc)]=![];return'success';}}};}async[_cmpF(0x383,0x2cf)](){function bf(a,b){return _cmpF(b,a- -0xeb);}var a;try{const b=await this['post']({'messages':[{'content':'hi','role':bf(0x31b,0x319)}]}),c=this[bf(0x3d1,0x33d)](b);if(!((a=c==null?void 0x0:c[bf(0x3c6,0x2ea)])==null?void 0x0:a[bf(0x21c,0x298)])){return![];}}catch(d){console[bf(0x3c5,0x463)](d);return![];}return!![];}[_cmpF(0x498,0x3d7)](a=![]){const b=[],c={},{history:d}=this;let e=0x0;d['forEach'](({content:f,role:g,tool_calls:h,tool_call_id:j},k)=>{function bg(a,b){return _cmpb(b-0x11f,a);}if(g===bg(0x358,0x331)&&k<d[bg(0x208,0x232)]-0x1){b[bg(0x3ba,0x3fb)]({'role':g,'content':f});}else if(g==='assistant'){if(h==null?void 0x0:h[bg(0xed,0x232)]){h=h['map'](l=>{function bh(a,b){return bg(a,b- -0x18c);}e+=0x1;c[l['id']]=e;const m=l[bh(0x234,0x11a)],n=JSON[bh(0xd8,0x131)](m[bh(-0xb8,0x26)]);return{'id':e,'tool':m['name'],'properties':n};});b[bg(0x3cf,0x3fb)]({'role':g,'tool_calls':h});}}else if(g===bg(0x374,0x385)){b['push']({'content':f,'role':g,'tool_call_id':c[j]});}});function bi(a,b){return _cmpF(a,b- -0x4d8);}if(a){b[bi(0x13b,-0x13)](0x1,0x0,{'role':bi(0x7c,0x38),'content':this[bi(0x40,0x42)]});}return b;}};__publicField(DefaultAgent,_cmpF(0x40a,0x3c1),{'systemMessageParts':{'intro':{'weight':0x64,'fn':_cmpF(0x580,0x4d2)},'models':{'weight':0xc8,'fn':_cmpF(0x3db,0x408)},'tools':{'weight':0x12c,'fn':_cmpF(0x522,0x403)},'outro':{'weight':0x190,'fn':'systemMessageOutro'}},'trainingData':{'$config':{'merge':_cmpF(0x2c2,0x2b2)}},'apiPlugin':null});DefaultAgent[_cmpF(0x3ce,0x34e)]=_cmpF(0x2ee,0x386);var AIChatMessageModel=class extends ChatMessageModel{};__publicField(AIChatMessageModel,_cmpF(0x221,0x2dc),[{'name':_cmpF(0x2cd,0x3cb),'type':_cmpF(0x261,0x3a9)},{'name':'audio','type':_cmpF(0x483,0x437)},{'name':_cmpF(0x431,0x474),'type':_cmpF(0x26b,0x3a9)},{'name':_cmpF(0x304,0x291),'type':'boolean'},{'name':_cmpF(0x37f,0x276),'type':_cmpF(0x410,0x437)},{'name':_cmpF(0x3c8,0x3c4),'type':_cmpF(0x363,0x30c)}]);AIChatMessageModel[_cmpF(0x331,0x34e)]=_cmpF(0x24b,0x317);var NoAudioDetectedError=class extends Error{constructor(a=_cmpF(0x2a4,0x3a1)){super(a);function bj(a,b){return _cmpF(b,a- -0x494);}this[bj(-0x216,-0x18e)]=bj(0x89,0x69);}};var AudioManager=class extends Base[_cmpF(0x1de,0x2ea)](Delayable_default){constructor(){super(...arguments);__publicField(this,bk(0x176,0x137),0x5dc);function bk(a,b){return _cmpF(b,a- -0x14c);}__publicField(this,bk(0x2e1,0x1a1),0x2710);}async[_cmpF(0x415,0x4bf)]({silenceTimeout:a,noSpeechTimeout:b}={}){const c=this,d=new AudioContext(),e=d[bl(0x17,-0xed)](),f=c[bl(-0x101,0x6)]=await navigator[bl(0xea,0x1bc)][bl(0x194,0x145)]({'audio':!![]}),g=d[bl(-0x12,-0x136)](f),h=c[bl(0x13d,0x17f)]=new MediaRecorder(f);c[bl(0x2,-0x13c)]=[];c[bl(-0x17,0xaa)]=![];g[bl(0x18a,0x101)](e);h[bl(-0x64,-0xfa)]();function bl(a,b){return _cmpF(b,a- -0x38f);}c[bl(0x120,0x1b2)](e,a,b);EventHelper['on']({'element':h,'dataavailable':c[bl(0xbc,0x163)],'stop':c[bl(-0x76,-0x11b)],'thisObj':c});return c[bl(0x72,-0xe5)]=new Promissory();}[_cmpF(0x48e,0x44b)]({data:a}){function bm(a,b){return _cmpF(b,a- -0x1b);}this['$audioChunks'][bm(0x4b5,0x3ae)](a);}['onMediaRecorderStop'](){function bn(a,b){return _cmpF(a,b-0x175);}if(this[bn(0x3ce,0x4ed)]){const a=new Blob(this[bn(0x625,0x506)],{'type':bn(0x5a8,0x5a9)});this[bn(0x65d,0x576)]['resolve'](a);}else{this[bn(0x632,0x576)][bn(0x2dd,0x40e)](new NoAudioDetectedError());}}[_cmpF(0x608,0x521)](){var a,b;(a=this['$mediaRecorder'])==null?void 0x0:a[bo(0x2ff,0x40e)]();this[bo(0x4ca,0x3c2)]=null;(b=this[bo(0x79,0x184)])==null?void 0x0:b[bo(0x2fd,0x1ae)]()[bo(0x1bc,0x262)](c=>c[bo(0x30c,0x40e)]());function bo(a,b){return _cmpF(a,b- -0x10a);}this['$recordingStream']=null;}[_cmpF(0x380,0x4af)](a,b=this[_cmpF(0x1c8,0x2c2)],c=this['noSpeechTimeout'],d=performance['now']()){var e;const f=this,g=0.1,h=new Uint8Array(a[bp(0x165,0x217)]);a[bp(0x28f,0x224)](h);function bp(a,b){return _cmpF(a,b- -0x117);}const i=h['every'](j=>Math[bp(0x32c,0x1ea)](j-0x80)<g*0x80);if(i){if(performance[bp(0x56,0x1a6)]()-d>(f[bp(0x143,0x261)]?b:c)){f[bp(0x51d,0x40a)]();console['log'](bp(0xbe,0x19a));}}else{!f[bp(0x3ad,0x261)]&&console['log']('Speech\x20detected');f[bp(0x299,0x261)]=!![];d=performance['now']();}if(((e=f[bp(0x4a1,0x3b5)])==null?void 0x0:e[bp(0x3e5,0x403)])===bp(0x20f,0x176)){f['checkForSilence'](a,b,c,d);}}async[_cmpF(0x607,0x4d9)](a){function bq(a,b){return _cmpF(b,a- -0x237);}const b=new MediaSource(),c=URL['createObjectURL'](b);b[bq(0x1db,0x25e)](bq(0xee,-0x42),()=>{function br(a,b){return bq(a-0x3cc,b);}const d=b[br(0x639,0x664)](br(0x697,0x656)),e=a[br(0x593,0x6a7)][br(0x4ea,0x479)](),f=[];let g=![];function h(){function bs(a,b){return br(a- -0x75a,b);}if(!d[bs(-0xf2,-0xc3)]&&f['length']>0x0){const j=f[bs(-0x183,-0x21d)]();d[bs(-0x11f,-0x37)](j);}}d[br(0x5a7,0x54e)](br(0x666,0x6d8),()=>{h();if(!g){i();}});function i(){g=!![];function bt(a,b){return br(b- -0x540,a);}e['read']()[bt(0xe9,0x8b)](({done:j,value:k})=>{function bu(a,b){return bt(a,b- -0x4d);}if(j){if(!d[bu(-0x63,0xdb)]){b[bu(0xdc,-0x20)]();}else{d[bu(-0xea,0x1a)](bu(0x12e,0xd9),()=>{function bv(a,b){return bu(b,a-0x2e7);}if(b[bv(0x29d,0x3bb)]===bv(0x320,0x2a7)){b['endOfStream']();}},{'once':!![]});}return;}f[bu(-0x4b,0xd8)](k);h();g=![];});}i();});return await this[bq(0x13d,0x24b)](c);}async[_cmpF(0x250,0x324)](a){function bw(a,b){return _cmpF(b,a- -0x336);}const b=URL['createObjectURL'](await a[bw(0x1b7,0x27c)]());return await this[bw(0x3e,0x9c)](b);}async['internalStartPlayback'](a){const b=this;let c=b[bx(0x2cc,0x3a6)];if(b[bx(0x248,0x311)]){await b[bx(0x231,0x1ca)]();}b['$playbackPromise']=new Promissory();if(!c){c=b[bx(0x2cc,0x366)]=new Audio();EventHelper['on']({'element':c,'ended':b[bx(0x399,0x2ed)],'pause':b['onAudioPaused'],'thisObj':b});}function bx(a,b){return _cmpF(b,a- -0xaa);}c['src']=a;await c[bx(0x21f,0x1d8)]();await b['$playbackPromise'];}async['stopPlayback'](){this[by(0x52c,0x470)][by(0x5c5,0x5eb)]();function by(a,b){return _cmpF(a,b-0xfa);}await this['$playbackPromise'];}['onAudioEnded'](){function bz(a,b){return _cmpF(b,a- -0xad);}this[bz(0x1cc,0x16b)]();}[_cmpF(0x3c5,0x279)](){function bA(a,b){return _cmpF(b,a-0x72);}var a;(a=this[bA(0x553,0x58d)])==null?void 0x0:a[bA(0x482,0x58e)]();this['$playbackPromise']=null;}get[_cmpF(0x1d9,0x2f2)](){function bB(a,b){return _cmpF(a,b-0xa3);}return this[bB(0x564,0x584)]!=null;}};__publicField(AudioManager,'delayable',{'checkForSilence':0x64});AudioManager[_cmpF(0x3fb,0x34e)]=_cmpF(0x4e4,0x3c3);var AIChatPanelMixin_default=a=>{var b;function bC(a,b){return _cmpF(b,a- -0x1a5);}return b=class extends ChatPanelMixin_default(a){[bC(0x324,0x2a3)](c){function bD(a,b){return bC(b- -0x11b,a);}this[bD(-0x110,-0x3c)][bD(0x128,-0x19)][bD(0x1cd,0x187)]=!c;}['updateShowRecordButton'](c){function bE(a,b){return bC(a- -0x3bd,b);}this[bE(-0x26c,-0x11d)][bE(-0x11b,-0x18d)]=!c;}['changeVerbosityLevel'](c){function bF(a,b){return bC(b-0x114,a);}var d;return(d=c==null?void 0x0:c[bF(0x457,0x389)])==null?void 0x0:d[bF(0x439,0x2f4)](c);}[bC(0x2d5,0x359)](){function bG(a,b){return bC(b-0x295,a);}super[bG(0x66d,0x56a)]();this[bG(0x345,0x3bf)]&&this[bG(0x639,0x501)]({'fn':bG(0x42d,0x3a3),'delay':0x1f4});}get[bC(0x151,0x1c)](){function bH(a,b){return bC(a-0xe1,b);}return this[bH(0x1bf,0x1c9)][bH(0x208,0xf9)][bH(0x1c4,0x271)];}get[bC(0x2b4,0x206)](){function bI(a,b){return bC(a- -0x333,b);}return this[bI(-0x255,-0x279)][bI(-0x20c,-0x148)][bI(0x40,-0xd)];}get[bC(0x14f,0x227)](){function bJ(a,b){return bC(b- -0x3a8,a);}return this[bJ(-0x3c6,-0x2d9)];}get['asyncMessage'](){function bK(a,b){return bC(b- -0x31b,a);}const {last:c}=this[bK(-0x8c,-0x1b1)];return(c==null?void 0x0:c[bK(-0x1c4,-0x243)])||(c==null?void 0x0:c[bK(-0x156,-0x181)])?c:null;}set[bC(0x14f,0x5)](c){this[bL(-0x250,-0x310)]=c;this['micButton'][bL(-0x81,-0x13e)][bL(-0x9b,-0x7a)][bL(-0x16a,-0xf7)]('b-is-recording',c);function bL(a,b){return bC(b- -0x3df,a);}this['toggleSendButtonState'](c,bL(-0x425,-0x2f7));}set[bC(0x277,0x1b7)](c){this[bM(-0x2a,-0x171)]=c;this['widgetMap']['offline'][bM(0x1e,0x62)]=!c;function bM(a,b){return bC(a- -0x284,b);}this['messageField'][bM(-0xd3,0x14)]=c;}get[bC(0x277,0x32d)](){function bN(a,b){return bC(a- -0x4d,b);}return this[bN(0x20d,0x16e)];}async[bC(0x19f,0x2ec)](c){function bO(a,b){return bC(a-0x205,b);}const {stop:d,send:e}=this[bO(0x2e3,0x3de)]['triggers'];d[bO(0x4a7,0x436)]=![];e[bO(0x4a7,0x50c)]=!![];this[bO(0x4d7,0x445)](!![],bO(0x3a1,0x341));await super[bO(0x3a4,0x434)](c);d['hidden']=!![];e[bO(0x4a7,0x59c)]=![];this[bO(0x4d7,0x526)](![],bO(0x3a1,0x3a6));}['onBeforeRenderMessage']({message:c,messageTools:d}){super[bP(0x3e9,0x2f3)](arguments[0x0]);function bP(a,b){return bC(b-0x9b,a);}const e=this;if(!c[bP(0x2cc,0x242)]&&!c[bP(0x1c2,0x315)]){if(e[bP(0x271,0x269)]&&e['speak']){d[bP(0x15b,0x21c)]={'tag':'button','class':bP(0x3c5,0x3ea),'tooltip':bP(0x2de,0x3ed)};}if(e['showConfidenceIndicator']){d[bP(0xbd,0x17b)]={'class':bP(0xec,0x215),'ref':bP(0x336,0x2c1),'field':bP(0x2a0,0x2c1),'tooltip'({message:f}){function bQ(a,b){return bP(b,a-0xda);}return'Confidence:\x20'+Math['round']((f[bQ(0x39b,0x242)]||0x0)*0xa)/0xa;}};}if(e['showUndoButton']&&e['undo']&&e[bP(0x30f,0x318)]===c){d[bP(0x47b,0x3b1)]={'tag':bP(0x2b9,0x2e5),'class':'b-icon\x20b-icon-undo','tooltip':bP(0x4bd,0x3a9)};}if(e[bP(0x30e,0x2c5)]&&e['redo']&&e[bP(0x46c,0x374)]===c){d['redo']={'tag':bP(0x26c,0x2e5),'class':bP(0x255,0x1cf),'tooltip':'Redo\x20data\x20changes'};}if(!c['feedback']&&e['feedbackUrl']){d[bP(0x31f,0x298)]={'tag':bP(0x32f,0x2e5),'class':bP(0x18d,0x1dd),'tooltip':bP(0x3e5,0x302)};d[bP(0x1e4,0x26b)]={'tag':bP(0x36e,0x2e5),'class':bP(0x2e0,0x188),'tooltip':bP(0x14d,0x26d)};}}}get[bC(0x27d,0x33c)](){function bR(a,b){return bC(b- -0x144,a);}return this[bR(0x115,0x26)][bR(0x2ab,0x16b)][bR(0x135,0x98)](c=>c[bR(0x68,-0x58)]&&!c[bR(0x7b,-0x73)])['at'](-0x1);}get[bC(0x2d9,0x371)](){function bS(a,b){return bC(a-0x123,b);}return this['store'][bS(0x3d2,0x51f)][bS(0x2ff,0x25d)](c=>c['undoable']&&c[bS(0x1f4,0x9f)])['at'](-0x1);}['onClearChatClick'](){function bT(a,b){return bC(b- -0x120,a);}this['store'][bT(0x5e,0x12)]();}[bC(0x1ef,0x1ef)]({item:c}){function bU(a,b){return bC(b- -0x17,a);}this[bU(0x379,0x290)]=c[bU(0x3d4,0x290)];this[bU(0x261,0x153)][bU(0xe3,0x11b)]();}[bC(0x262,0x376)]({item:c}){function bV(a,b){return bC(a-0x2f2,b);}this[bV(0x515,0x5f0)]=c['checked'];}['onToolClick'](c){var d,e,f,g,h,i;super[bW(-0x186,-0x102)](c);const j=this,{message:k,tool:l}=c;function bW(a,b){return bC(a- -0x3c0,b);}switch(l){case bW(-0x23f,-0x17b):{j[bW(-0x23f,-0x238)](k[bW(-0x2d6,-0x21b)],j['chat'][bW(-0xb1,-0x1fe)](k));break;}case'undo':{(f=(e=(d=j[bW(-0xaa,-0x116)])==null?void 0x0:d['call'](j,k))==null?void 0x0:e[bW(-0x12f,0x5)])==null?void 0x0:f[bW(-0x1e0,-0x20d)](e,()=>{k['set']({'undone':!![]});});break;}case bW(-0x2bc,-0x279):{(i=(h=(g=j[bW(-0x2bc,-0x262)])==null?void 0x0:g[bW(-0x1e0,-0x1ee)](j,k))==null?void 0x0:h['then'])==null?void 0x0:i[bW(-0x1e0,-0x2c7)](h,()=>{function bX(a,b){return bW(b-0xff,a);}k[bX(-0x261,-0x1dd)]({'undone':![]});});break;}case bW(-0x1f0,-0x321):case bW(-0x1c3,-0x120):{j[bW(-0x17c,-0x2b6)](l,k);}}}async[bC(0x10e,0x7d)](){function bY(a,b){return bC(b- -0x1fa,a);}const c=await this[bY(-0x72,-0xd0)]();if(!c){this[bY(0x11a,0x7d)]=!![];}else if(this[bY(0xae,0x7d)]){this[bY(0x14b,0x7d)]=![];}}async[bC(0x37d,0x2a1)](c,d){var e;function bZ(a,b){return bC(a- -0x167,b);}const f=this;if(c['id']){const g=f[bZ(0x3,-0x129)]['getById'](c['id']),{autoReadAloud:h}=f;if(h===!![]||(g==null?void 0x0:g['audio'])&&h==='audio-input'){const i=f[bZ(0x39,0x38)][bZ(0x1a8,0x1de)](d);f[bZ(0x1a,-0x120)](c[bZ(-0x7d,0xda)],i)['then'](()=>{function c0(a,b){return bZ(b-0xb8,a);}if(f['autoRecord']&&(g==null?void 0x0:g['audio'])){f[c0(0x1ff,0x26b)]();}});}c[bZ(0x168,0x19b)]=c['id'];}delete c['id'];c[bZ(-0x7d,-0xbe)]=(e=c['text'])==null?void 0x0:e['replace'](/^\*\*(.*?)\*\*$/,'$1');if(f[bZ(0x15d,0x1a7)]){c['text']=f[bZ(0x15d,0x133)](c[bZ(-0x7d,-0xed)]);}}[bC(0x155,0x96)](){function c1(a,b){return bC(a-0xe3,b);}if(this['showRecordButton']&&this[c1(0x234,0x102)]){if(this[c1(0x232,0xfa)]){this['stopRecording']();}else{this[c1(0x3fd,0x44e)]();}}}[bC(0x37c,0x2bb)](){var c;function c2(a,b){return bC(a- -0x1c9,b);}(c=this[c2(0x101,-0x47)])==null?void 0x0:c[c2(0x1b3,0x183)]();}async['startRecording'](c){const d=this;if(d[c3(0xf3,0x1d5)]){return;}if(!d[c3(0x369,0x350)]){d[c3(0x48b,0x350)]=new AudioManager();}d['isRecording']=!![];d[c3(0xc3,0x1e1)]=c;function c3(a,b){return bC(b-0x86,a);}try{const e=await d['audioManager']['startRecording'](c);if(d[c3(0x303,0x3da)]){return;}if(d[c3(0x324,0x34b)]){const f=await d[c3(0x23a,0x34b)](e);if(ObjectHelper['isPromise'](f)){f[c3(0x1d1,0x317)](g=>d[c3(0x2da,0x213)](g,!![]));}else if(f){d['addLocalMessage'](f,!![]);}}else{d['trigger'](c3(0x1b7,0x1c0),{'audioBlob':e});}}catch(g){if(g instanceof NoAudioDetectedError){Toast[c3(0x374,0x308)]('No\x20audio\x20detected,\x20please\x20try\x20again',c3(0x4a,0x186));return;}throw g;}finally{d['isRecording']=![];d[c3(0xf3,0x1e1)]=null;}}async[bC(0x181,0x134)](c,d){var e;const f=this;if(f[c4(0x376,0x3f5)]){f[c4(0x5a3,0x4c2)]();}c=StringHelper[c4(0x4a8,0x36c)](c);function c4(a,b){return bC(a-0x227,b);}d==null?void 0x0:d[c4(0x58c,0x491)]['add']('b-is-speaking');await((e=f[c4(0x4fd,0x3d1)])==null?void 0x0:e[c4(0x407,0x559)](f,c));d==null?void 0x0:d['classList'][c4(0x581,0x6a8)](c4(0x4d1,0x544));}async['sendFeedback'](c,d){const e=await AjaxHelper[c5(0xef,0x142)](this[c5(-0x8,0x125)],{'positive':c===c5(0xc9,0x116),'messages':this['feature'][c5(0x1ae,0x6c)]['default'][c5(-0xdb,0x16)]['map'](f=>{function c6(a,b){return c5(a,b- -0xe9);}var g;return{'text':((g=f['toolCalls'])==null?void 0x0:g[c6(-0xae,-0x6e)])?JSON['stringify'](f[c6(0x10f,0x1ab)]):f['content']+(f['id']?'\x20('+f['id']+')':''),'fromOther':f['role']==='assistant'};}),'url':document[c5(0x2d9,0x199)]['href']});function c5(a,b){return bC(b- -0xe7,a);}if(e['ok']){d[c5(0x13d,0x138)]=c;Toast[c5(0x2ed,0x19b)](c5(0x36,0xb1));}}[bC(0x31b,0x1d6)](){function c7(a,b){return bC(b- -0xc5,a);}const {asyncMessage:c}=this,d=new Date();super[c7(0x23b,0x256)](...arguments);if(this[c7(0x66,0xdf)][c7(0x207,0xec)]&&!this['stopButton']['hidden']&&c&&(c[c7(0x90,0xd5)]||d-c[c7(-0x66,0x7f)]>0x1f4)){this[c7(-0x59,0xe2)]();}}[bC(0x1bd,0x1c7)](){function c8(a,b){return bC(a- -0x1ab,b);}this[c8(-0x4,0x3d)]();}[bC(0x1a7,0xdb)](){function c9(a,b){return bC(a- -0x297,b);}this[c9(-0x100,0x4b)]('userAborted');this[c9(-0x54,-0xc7)]();}['abortMessage'](){var c;const {asyncMessage:d}=this;function ca(a,b){return bC(a-0x154,b);}if(d&&!d[ca(0x2fb,0x447)]){d['abort']=!![];d[ca(0x22c,0x302)]=![];d[ca(0x2ee,0x329)]=![];d['text']=((c=d[ca(0x23e,0x1fe)])!=null?c:'')+ca(0x3a2,0x2e0);}}['doDestroy'](){var c;super[cb(0x392,0x2a6)]();function cb(a,b){return bC(b-0x117,a);}(c=this[cb(0x3be,0x3e1)])==null?void 0x0:c['destroy']();}},__publicField(b,bC(0xd7,0xd),'AIChatPanelMixin'),__publicField(b,'configurable',{'showReadAloud':null,'showConfidenceIndicator':null,'showRecordButton':null,'showUndoButton':!![],'showRedoButton':!![],'autoReadAloud':bC(0x2d3,0x321),'autoRecord':!![],'verbosityLevels':{0x1:'Be\x20extremely\x20short\x20in\x20all\x20your\x20textual\x20answers,\x20only\x20using\x20the\x20minimal\x20amount\x20of\x20words\x20necessary.\x20If\x20possible,\x20only\x20answer\x20with\x20one\x20word.',0x2:bC(0x20f,0x2f6),0x3:bC(0x16e,0x127)},'verbosityLevel':'2','feedbackUrl':null,'items':{'chatBubbles':{'store':{'modelClass':AIChatMessageModel}},'messageField':{'triggers':{'stop':{'cls':bC(0x255,0x37a),'handler':bC(0x289,0x1b6),'hidden':!![]},'mic':{'cls':bC(0x15e,0x20d),'handler':bC(0x336,0x2f4),'hidden':!![],'compose'(c){function cc(a,b){return bC(b-0x17d,a);}delete c[cc(0x3b9,0x29c)];c[cc(0x5c7,0x4b8)]=0x0;c[cc(0x2f8,0x2fb)][cc(0x492,0x3eb)]=function(d){function cd(a,b){return cc(a,b- -0xee);}if(d[cd(0x251,0x269)]==='\x20'){this[cd(0x17b,0x181)](d);}};}}}}},'keyMap':{'Ctrl+Shift+R':bC(0x155,0x69)},'tools':{'offline':{'cls':bC(0x20b,0x2cc),'hidden':!![],'onClick':bC(0x171,0x17a),'tooltip':bC(0x2ec,0x297)},'settings':{'cls':bC(0x10b,0xaa),'hidden':!![],'onClick'({source:c}){function ce(a,b){return bC(a-0x203,b);}const d=this,e=[{'icon':ce(0x415,0x409),'text':ce(0x4a6,0x4c2),'onItem':ce(0x542,0x535)},{'checked':!![],'text':ce(0x3a8,0x30c),'onItem':ce(0x3a0,0x2e6)},{'text':ce(0x4bd,0x45a),'icon':ce(0x425,0x34e),'menu':ObjectHelper['keys'](d['owner'][ce(0x541,0x3ff)])[ce(0x44c,0x57c)](g=>({'text':g,'verbosityLevel':g,'checked':d[ce(0x438,0x429)][ce(0x4aa,0x5f7)]===g,'toggleGroup':'v','onItem':'up.onVerbosityChange'}))}];d['owner'][ce(0x438,0x352)][ce(0x39a,0x253)](ce(0x4e0,0x5ba),{'items':e});const f=new Menu({'anchor':!![],'owner':d,'items':e});f['showBy'](c[ce(0x4a4,0x590)]);}}},'showSettingsButton':!![],'formatText':StringHelper[bC(0x15a,0x7a)]}),b;};var AIChatPanel=class extends ChatPanel['mixin'](AIChatPanelMixin_default){};__publicField(AIChatPanel,'$name',_cmpF(0x4ae,0x472));__publicField(AIChatPanel,'type',_cmpF(0x414,0x37e));AIChatPanel[_cmpF(0x410,0x32a)]();AIChatPanel[_cmpF(0x45d,0x34e)]=_cmpF(0x412,0x472);var AIChatPopup=class extends ChatPopup[_cmpF(0x34b,0x2ea)](AIChatPanelMixin_default){};__publicField(AIChatPopup,_cmpF(0x360,0x27c),_cmpF(0x664,0x526));__publicField(AIChatPopup,_cmpF(0x572,0x44d),'aichatpopup');AIChatPopup[_cmpF(0x2c3,0x32a)]();AIChatPopup[_cmpF(0x210,0x34e)]='AIChatPopup';var voiceActivationDefaults={'replyOnActivation':!![],'autoStart':![],'useNativeSpeechRecognition':!![],'language':_cmpF(0x31d,0x3ea),'conversationTimeout':0x3e8*0x3c*0xa};var _a;var speech=(_a=globalThis[_cmpF(0x2f8,0x449)])!=null?_a:globalThis[_cmpF(0x3d7,0x2ab)];var AIBase=class extends InstancePlugin['mixin'](Delayable_default){get[_cmpF(0x3f1,0x2aa)](){function cf(a,b){return _cmpF(a,b- -0x1b1);}return this[cf(0x164,0x127)][cf(0x2a3,0x2b1)];}static get[_cmpF(0x370,0x32d)](){function cg(a,b){return _cmpF(a,b- -0x2b7);}return{'assign':[cg(0x1b9,0x13f)]};}[_cmpF(0x509,0x50b)](a){ObjectHelper['forEach'](a,b=>{function ch(a,b){return _cmpb(a-0x27e,b);}if(typeof b['store']==='string'){b['store']=this[ch(0x493,0x37f)](b[ch(0x399,0x4f1)]);}});return a;}[_cmpF(0x352,0x31d)](a){function ci(a,b){return _cmpF(b,a- -0x319);}this[ci(-0x65,-0x71)](ci(0x17a,0x221),a);}[_cmpF(0x55c,0x517)](a){function cj(a,b){return _cmpF(a,b-0x69);}this[cj(0x356,0x31d)]('apiPlugin',a);}[_cmpF(0x3e6,0x2e2)](a){function ck(a,b){return _cmpF(b,a- -0x38e);}this['setAgentConfig'](ck(0xbc,-0x9a),a);}[_cmpF(0x535,0x3f9)](a){function cl(a,b){return _cmpF(a,b- -0x96);}this[cl(0x120,0x21e)](cl(0x307,0x3df),a);}[_cmpF(0x173,0x2b4)](a,b){function cm(a,b){return _cmpF(a,b- -0x58e);}if(!this[cm(-0x134,-0xcd)]&&this['agent']){this[cm(-0xe6,-0x7f)][a]=b;}}get[_cmpF(0x48b,0x3a7)](){function cn(a,b){return _cmpF(b,a- -0x15d);}var a;const b=this;return{'aborted':b[cn(0x344,0x371)][cn(0x3c2,0x429)](b),'beforeToolCall':b['beforeToolCall'][cn(0x3c2,0x3ef)](b),'client':b['client'],'clientShouldAbort':b[cn(0x33e,0x337)][cn(0x3c2,0x276)](b),'_configuredModels':b['models'],'_configuredTools':b[cn(0x127,0xfc)],'dateFormat':b['dateFormat'],'debugMode':b[cn(0x123,0x24f)],'fetchOptions':b[cn(0x32f,0x354)],'getState':(a=b['getState'])==null?void 0x0:a[cn(0x3c2,0x4ce)](b),'manageChatHistory':b[cn(0x378,0x220)],'model':b['model'],'temperature':b[cn(0x2ed,0x195)],'maxTokens':b[cn(0x2f4,0x25a)],'apiPlugin':b[cn(0x28f,0x320)],'productName':b['productName'],'promptUrl':b[cn(0x2b7,0x266)],'responseProcessed':b['responseProcessed'][cn(0x3c2,0x4bd)](b),'systemMessageParts':b[cn(0x13b,0x7d)]?{'verbosity':{'weight':0x15e,'fn':()=>b[cn(0x13b,0x276)][cn(0x386,0x2ec)][b[cn(0x13b,-0x5)]['verbosityLevel']]}}:{},'trainingData':b[cn(0x1f3,0x120)],'undo':b[cn(0x35e,0x297)]?{'available':b[cn(0x322,0x3ac)]['bind'](b),'fn':b['undoAction']['bind'](b)}:void 0x0};}[_cmpF(0x514,0x4e5)](a){return new a(this['agentConfig']);}['updateAvailableThemes'](a){function co(a,b){return _cmpF(b,a- -0x209);}a[co(0x163,0x38)](b=>{function cp(a,b){return co(b- -0x232,a);}if(!b['alias']){b[cp(0x151,0x4b)]=b[cp(-0x1c4,-0x1bd)];}});}get[_cmpF(0x193,0x298)](){function cq(a,b){return _cmpF(a,b- -0x573);}var a;return(a=this[cq(-0x156,-0x15b)])==null?void 0x0:a['chatPanel'];}[_cmpF(0x335,0x3c2)](a){function cr(a,b){return _cmpF(a,b- -0x4c7);}const b=this[cr(0x12d,-0x28)](cr(-0x30f,-0x210));if(b!=null){return b===cr(-0xee,0x35);}return a;}[_cmpF(0x3d7,0x466)](a,b){function cs(a,b){return _cmpF(a,b- -0x576);}this[cs(-0x25b,-0x229)]&&localStorage['setItem'](cs(-0x168,-0x1a6)+a,b);}[_cmpF(0x4f9,0x49f)](a){function ct(a,b){return _cmpF(b,a- -0xbc);}return this['saveSettingsToLocalStorage']?localStorage[ct(0x3fe,0x314)]('b-ai-'+a):null;}['changeVoiceActivationAutoStart']({value:a}){const b=this['getSetting'](cu(0x1aa,0x103));function cu(a,b){return _cmpF(a,b- -0x217);}if(b!=null){return b==='true';}return Boolean(a);}['updateVoiceActivationAutoStart']({value:a}){const b=this;function cv(a,b){return _cmpF(b,a- -0x354);}if(a&&b[cv(0x16d,0xe1)]){b[cv(0x1c7,0x28e)](()=>{function cw(a,b){return cv(b- -0x261,a);}MessageDialog_default[cw(-0x220,-0x275)]({'title':'Bryntum\x20AI','message':'Do\x20you\x20want\x20enable\x20Bryntum\x20AI\x20voice\x20activation?','okButton':cw(-0x20f,-0xd8),'cancelButton':'No'})[cw(-0x214,-0x17f)](c=>{function cx(a,b){return cw(a,b-0x154);}if(c===MessageDialog_default[cx(-0xcc,0x1b)]){b[cx(0x10,-0x7f)]();if(b['_voiceActivationEnabled']){Toast[cx(-0x144,-0x3a)]('Voice\x20activation\x20enabled,\x20use\x20the\x20phrase\x20\x22'+b[cx(-0x1ce,-0xa5)][cx(-0x33a,-0x1e9)]+'\x22\x20to\x20start\x20a\x20conversation');}}});});}}['updateVoiceActivationPhrase']({value:a,proxy:b}){function cy(a,b){return _cmpF(b,a- -0x277);}b[cy(0x19,0xd)]=a==null?void 0x0:a[cy(0xd1,0x59)]();}['changeVoiceActivation'](a){function cz(a,b){return _cmpF(b,a- -0x344);}return ObjectHelper[cz(0xeb,0x202)](a!=null?a:{},voiceActivationDefaults);}[_cmpF(0x2c5,0x2da)](a){var b,c,d;const e=this;if(!e[cA(-0xc6,-0xf5)]&&e[cA(-0x121,-0x1e0)]){e[cA(-0x207,-0x1e0)][cA(-0x1e3,-0x2fa)]();}function cA(a,b){return _cmpF(a,b- -0x5b6);}if(a){if(a===!![]){a={};}a[cA(-0x1ca,-0x31e)]=ObjectHelper['assign']({'type':((b=a[cA(-0x3cd,-0x31e)])==null?void 0x0:b[cA(0x23,-0xde)])?cA(-0x357,-0x238):cA(-0x2aa,-0x24f),'transcribe':e['transcribe']['bind'](e),'speak':e[cA(-0x120,-0x178)]['bind'](e),'feedbackUrl':e['feedbackUrl'],'showUndoButton':e[cA(-0x97,-0xfb)],'showRedoButton':e['redo'],'undo':e[cA(0x3b,-0xa4)][cA(0x8e,-0x97)](e),'redo':e[cA(-0x26c,-0x2f5)][cA(0x52,-0x97)](e),'feature':e},(c=a['chatPanel'])!=null?c:{});if(e[cA(-0x20e,-0x26f)]){a[cA(-0x1d9,-0x31e)]['checkConnectionStatus']=e[cA(-0xed,-0xa7)][cA(-0x3a2,-0x2e7)]['bind'](e['agent']);}a[cA(-0x1d8,-0x14f)]=ObjectHelper[cA(-0x3b0,-0x256)]({'thisObj':e,'localMessage':e[cA(-0x184,-0x8f)],'click':e[cA(-0x35d,-0x263)],'contextmenu':e[cA(-0x18d,-0xc3)],'populateSettingsMenu':e[cA(-0xfd,-0x134)],'userAborted':e[cA(-0x147,-0x226)]},a[cA(-0x1b0,-0x14f)]);(d=a[cA(-0x192,-0x155)])!=null?d:a[cA(-0xa,-0x155)]=e[cA(-0x3e7,-0x2de)]['element'];a[cA(-0x178,-0x9c)]=e['chatButtonState'];const f=new ChatButton(a);if(e[cA(-0x1d4,-0x209)]){const g=f[cA(-0x2b6,-0x1fe)];f[cA(-0x1df,-0x1fe)]=h=>{function cB(a,b){return cA(a,b-0x5ac);}if(h[cB(0x381,0x43d)]){return e[cB(0x1c2,0x2e9)]();}g[cB(0x409,0x37b)](f,h);};}return f;}}[_cmpF(0x408,0x524)](a){var b,c;function cC(a,b){return _cmpF(b,a- -0x293);}const d=this;if(a){(b=d[cC(0x207,0x250)])!=null?b:d['stm']=new StateTrackingManager();ObjectHelper['forEach'](d[cC(0x27c,0x3c2)][cC(0x94,0x1d3)],({store:e},f)=>{function cD(a,b){return cC(a-0x1a4,b);}d['stm'][cD(0x247,0x11b)](e);});d[cC(0x207,0x160)]['enable']();}else{(c=d[cC(0x207,0x2fe)])==null?void 0x0:c[cC(0x29,0xae)]();d[cC(0x207,0x128)]=null;}}['updateRedo'](a){function cE(a,b){return _cmpF(a,b- -0x454);}if(a&&!this[cE(-0x4,0x67)]){this[cE(0x163,0x67)]=!![];}}[_cmpF(0x4ab,0x36d)]({toolConfig:a,promptContext:b,response:c}){var d;const {statusDescription:e,state:f}=a;function cF(a,b){return _cmpF(b,a- -0x1e3);}if(this['stm']&&!a['noStm']&&!b[cF(0xa7,0x1b8)]){this['stm'][cF(0x227,0x2e6)]();b[cF(0xa7,0x17a)]=c;if(f){const g=this[cF(0x1ef,0x14a)](f);(d=b['savedStates'])!=null?d:b[cF(0x178,0x3f)]=[];b[cF(0x178,0x1dc)][cF(0x2ed,0x2b4)]({'state':g,'stateConfig':f});}}if(e){this[cF(0x1d3,0x1bb)](b[cF(0x92,0xab)],e);}}async['responseProcessed'](a,b){if(a[cG(0x126,-0x27)]===b){a[cG(0x8e,-0x27)]=null;a[cG(-0xec,-0x20)]=this[cG(0x1b1,0x1e9)][cG(-0x51,0xeb)]['length']>0x0;this[cG(0x13b,0x1e9)][cG(0x314,0x1bb)]();}function cG(a,b){return _cmpF(a,b- -0x2b1);}if(a[cG(0xf9,0xaa)]){a[cG(0x1f1,0xda)]={};a['stateAfter']={};a[cG(0xbe,0xaa)][cG(0x47,0xbb)](({state:c,stateConfig:d})=>{function cH(a,b){return cG(b,a- -0x4e);}const e=this[cH(0xd3,0x86)](d);if(!ObjectHelper[cH(0x1f0,0x303)](c,e)){a['stateUndoable']=!![];ObjectHelper[cH(-0x74,0x18)](a[cH(0x8c,0xdc)],c);ObjectHelper[cH(-0x74,-0xa7)](a[cH(-0x6b,0x1)],e);}});}}['getStateForToolCall']({path:a,empty:b}){const c={};function cI(a,b){return _cmpF(b,a- -0x26a);}ArrayHelper[cI(0x291,0x254)](a)['forEach'](d=>{function cJ(a,b){return cI(b-0x337,a);}var e;return ObjectHelper[cJ(0x593,0x561)](c,d,(e=ObjectHelper[cJ(0x3ba,0x41f)](this['client'][cJ(0x503,0x3fe)](),d))!=null?e:b);});return c;}[_cmpF(0x2bb,0x409)](a){function cK(a,b){return _cmpF(b,a- -0x4ed);}return this[cK(-0x215,-0x131)][a];}['beforeSplitClone'](a){function cL(a,b){return _cmpF(a,b- -0x489);}var b;((b=a['features'])!=null?b:a[cL(0x167,0x5e)]={})['ai']=![];}[_cmpF(0x4ae,0x3e2)](){const a=this,{voiceActivation:b}=a;if(a[cM(0x170,0x28b)]){return;}if(!b[cM(0x3d6,0x438)]||!speech){MessageDialog_default[cM(0x29c,0x21e)]({'message':cM(0x2da,0x2b2)});return;}if(!a['_speechRecognition']){Object[cM(0x24a,0x21e)](a['_speechRecognition']=new speech(),{'continuous':!![],'interimResults':!![],'lang':b['language'],'onresult':a['onVoiceResult'][cM(0x409,0x482)](a),'onerror':function(c){if(c['error']===cN(0x6f,-0xc9)){a[cN(-0xd0,-0x214)]&&console[cN(0xe,-0xd)]('No\x20speech\x20detected');a['_speechRecognition']['_restartOnEnd']=!![];return;}function cN(a,b){return cM(a- -0x23a,b);}console[cN(0x160,0x10f)](cN(0xa1,-0x36),c[cN(0x160,0x251)]);MessageDialog_default[cN(0x62,0x123)]({'message':cN(0x147,0xd3)});},'onend':function(){if(a[cO(0x511,0x509)][cO(0x416,0x436)]){a[cO(0x511,0x665)]['_restartOnEnd']=![];a['_speechRecognition']['start']();a[cO(0x294,0x28a)]&&console[cO(0x372,0x22c)](cO(0x42f,0x3bf));return;}a[cO(0x29a,0x3e4)]=![];a[cO(0x307,0x2c5)]();function cO(a,b){return cM(a-0x12a,b);}a[cO(0x294,0x22e)]&&console[cO(0x372,0x486)](cO(0x495,0x478));}});}if(a[cM(0x297,0x18c)]){a[cM(0x302,0x1d3)][cM(0x394,0x42d)]();}a['_speechRecognition'][cM(0x215,0x21e)]();function cM(a,b){return _cmpF(b,a- -0x116);}a[cM(0x170,0x106)]=!![];a[cM(0x1dd,0x175)]();}[_cmpF(0x3eb,0x2ca)](a){function cP(a,b){return _cmpF(a,b- -0x47c);}for(let b=a['resultIndex'];b<a['results'][cP(-0x3a,-0x175)];++b){if(a[cP(0x15,-0x125)][b][cP(0x19a,0xa0)]){const c=a['results'][b][0x0][cP(-0x91,-0x3f)][cP(0x53,0x84)](),d=c['replace'](/[^a-zA-Z\s]/g,'')['toLowerCase']();this[cP(-0x157,-0x1fc)]&&console['log']('Heard:',c);if(d===this[cP(-0x1d4,-0xc0)][cP(-0x2ce,-0x1ec)]){this[cP(0x3d,0x13)](c);}}}}async[_cmpF(0x389,0x48f)](a){var b;const c=this,{voiceOnly:d,voiceActivation:f}=c;function cQ(a,b){return _cmpF(a,b-0x198);}c[cQ(0x576,0x451)]=!![];if(d){c['debugMode']&&console[cQ(0x55a,0x4f6)](cQ(0x51b,0x635));}else{c[cQ(0x6f4,0x5b0)][cQ(0x6c8,0x5c9)]();}c[cQ(0x578,0x6a4)]();if(f[cQ(0x4c9,0x4ac)]){c[cQ(0x5c1,0x5fb)]=new Date()[cQ(0x507,0x486)]();c[cQ(0x3a0,0x430)]['addLocalMessage'](a,!![]);}try{while(c['_conversationStartMoment']<new Date()[cQ(0x58f,0x486)]()+f[cQ(0x374,0x4cd)]&&c['activeVoiceConversation']){await c[cQ(0x6a8,0x67e)]['promissory']['promise'];await((b=c['$audioManager'])==null?void 0x0:b['$playbackPromise']);if(c[cQ(0x35c,0x451)]){await c['startRecording']({'silenceTimeout':0x7d0});}}}catch(g){if(g instanceof NoAudioDetectedError){c[cQ(0x444,0x57a)]();if(c[cQ(0x448,0x41e)]){Toast[cQ(0x64d,0x5bf)](cQ(0x540,0x500)+f[cQ(0x320,0x410)]+cQ(0x34e,0x485));}}}finally{c[cQ(0x4c2,0x451)]=![];c['_conversationStartMoment']=null;}}[_cmpF(0x4c6,0x50c)](){var a;function cR(a,b){return _cmpF(b,a- -0x567);}(a=this[cR(-0x6a,-0x17a)])==null?void 0x0:a['stop']();}async['transcribe'](a){const b=new FormData();b[cS(0x2f3,0x305)](cS(0x330,0x3cd),a,'audio.wav');const c=await AjaxHelper[cS(0x1e8,0xed)](this['transcribeUrl'],{'method':cS(0x254,0x206),'body':b});function cS(a,b){return _cmpF(b,a- -0x1bb);}if(!c['ok']){Toast[cS(0x26c,0x3b4)](cS(0x2f1,0x1a0));return![];}return await c[cS(0xd4,-0x77)]();}async[_cmpF(0x3d6,0x43e)](a){function cT(a,b){return _cmpF(b,a-0x1f);}var b;const c=this;if(a==null||typeof a!=='string'||a[cT(0x326,0x208)]===0x0){return;}(b=c[cT(0x323,0x340)])!=null?b:c['$audioManager']=new AudioManager();c[cT(0x452,0x4e4)]=!![];c[cT(0x312,0x241)]();try{const d=await AjaxHelper[cT(0x3c2,0x395)](c[cT(0x390,0x419)],{'method':'POST','headers':{'Content-Type':'application/json'},'body':JSON['stringify']({'text':a})});if(!d['ok']){throw new Error('HTTP\x20error\x20'+d[cT(0x2f3,0x237)]);}const f=c[cT(0x323,0x25a)][cT(0x4f8,0x5db)](d);!c['isDestroyed']&&c[cT(0x312,0x1ba)]();await f;}catch(g){Toast[cT(0x446,0x301)]('Audio\x20playback\x20failed');console['error'](g);}finally{c[cT(0x452,0x389)]=![];!c['isDestroyed']&&c['updateChatButtonState']();}}async[_cmpF(0x3b6,0x4bf)](...a){const b=this[cU(0x343,0x3d2)]['startRecording'](...a);this['updateChatButtonState']();await b;function cU(a,b){return _cmpF(b,a-0xab);}this[cU(0x39e,0x2be)]();}async[_cmpF(0x4f0,0x521)](){this[cV(-0x15f,-0x1ba)][cV(0x1ac,0xcf)]();function cV(a,b){return _cmpF(a,b- -0x452);}this[cV(-0x37,-0x15f)]();}[_cmpF(0x480,0x527)]({text:a,id:b,source:c,option:d}){var e;function cW(a,b){return _cmpF(a,b-0x1a3);}const f=this;if(d||f[cW(0x4e7,0x574)]){(e=f[cW(0x441,0x574)])==null?void 0x0:e[cW(0x55c,0x5b3)](a);f[cW(0x508,0x574)]=null;return;}const g=f[cW(0x4ef,0x424)]();f[cW(0x5fa,0x689)]=g;f[cW(0x5ed,0x6b2)]['prompt'](a,g,f[cW(0x520,0x43b)][cW(0x58a,0x4b2)][cW(0x4ed,0x5f8)]===0x2)[cW(0x6bf,0x5d9)](({text:h,undoable:i,highlight:j,stateUndoable:k,stateBefore:l,stateAfter:m})=>{var n;function cX(a,b){return cW(a,b- -0x757);}if(!i&&k){i=!![];}g[cX(-0x80,-0x9e)][cX(-0x1d9,-0x1a4)]({'text':h,'id':b,'undoable':i,'stateData':k&&{'stateBefore':l,'stateAfter':m}});if(f[cX(-0x201,-0x31c)][cX(-0x33f,-0x1ec)]!==![]||g[cX(-0x150,-0x285)]){(n=f[cX(-0x2fd,-0x1ec)])==null?void 0x0:n['call'](f,g[cX(-0x268,-0x1ec)]);}})[cW(0x4ef,0x601)](h=>{function cY(a,b){return cW(a,b- -0x29a);}g[cY(0x3fd,0x41f)][cY(0x3c1,0x319)](![]);if(h[cY(0x2af,0x17e)]!==cY(0x410,0x3aa)&&h[cY(0x2b7,0x17e)]!==cY(0x455,0x3cd)){throw h;}})[cW(0x357,0x440)](()=>{f[cZ(0xe,0x3d)]();function cZ(a,b){return cW(b,a- -0x488);}f['ongoingPrompt']=null;});}['addAsyncMessage'](){const {chatPanel:a}=this,b=this['agent']['createPromptContext']({'undoable':![],'stateUndoable':![]});function d0(a,b){return _cmpF(b,a-0x11);}a[d0(0x355,0x434)](b[d0(0x527,0x483)][d0(0x398,0x475)]);b[d0(0x286,0x3b5)]=a[d0(0x320,0x3e4)][d0(0x443,0x2fd)];this[d0(0x304,0x3f9)]();this['trackAsyncDelayStatus'](b[d0(0x286,0x1cb)]);return b;}[_cmpF(0x382,0x49b)](a,b){var c;function d1(a,b){return _cmpF(b,a-0x5c);}let d=![];if(this[d1(0x555,0x5ea)]){d=d1(0x520,0x41f);}else if((c=b[d1(0x2d1,0x23a)])==null?void 0x0:c[d1(0x3a8,0x2ba)]){d=d1(0x4fd,0x3b4);}return d;}[_cmpF(0x26c,0x390)](){function d2(a,b){return _cmpF(a,b-0x135);}var a,b,c;(c=(b=(a=this[d2(0x5b4,0x61b)])==null?void 0x0:a['currentFetchPromise'])==null?void 0x0:b['abort'])==null?void 0x0:c[d2(0x484,0x4ba)](b);}[_cmpF(0x56d,0x4a1)](){this[d3(0x717,0x658)][d3(0x509,0x3e7)][d3(0x43d,0x401)]='<p\x20class=\x22b-failed\x22>(failed)</p>';function d3(a,b){return _cmpF(a,b-0x172);}this[d3(0x6b7,0x658)][d3(0x2dc,0x3e7)]['failed']=!![];}[_cmpF(0x412,0x3e8)](){function d4(a,b){return _cmpF(b,a-0xa6);}this[d4(0x4be,0x58d)][d4(0x33e,0x226)]['abortMessage']();}['updateMessageAsyncStatus'](a,b){function d5(a,b){return _cmpF(a,b- -0x155);}if(a['asyncStatus']!=b){a[d5(0x24a,0x166)]=b;a['meta'][d5(0x28f,0x381)]=new Date()['getTime']();}}[_cmpF(0x313,0x3a4)](a){function d6(a,b){return _cmpF(b,a-0x14b);}if((a==null?void 0x0:a['async'])&&!a[d6(0x497,0x593)]){if(new Date()-a[d6(0x434,0x382)]>0xea60){this['abortMessage'](a);Toast['show'](d6(0x508,0x43a));return;}const {asyncStatus:b}=a,c=!a[d6(0x670,0x56b)][d6(0x621,0x71a)]?-0x1:new Date()-a[d6(0x670,0x716)][d6(0x621,0x528)],{delayStatusTexts:d}=this;if(c<0x0||c>0xbb8){let e=b?d[d6(0x59e,0x560)](b)+0x1:0x0;if(e>=d[d6(0x452,0x592)]){e=0x0;}a[d6(0x406,0x458)]=d[e];}this[d6(0x4ef,0x3cf)](a);}}[_cmpF(0x352,0x353)]({source:a,event:b}){function d7(a,b){return _cmpF(b,a- -0x1f4);}if(b[d7(0x2fc,0x389)]){return;}switch(a[d7(0x326,0x414)]){case states[d7(0x1ac,0x27c)][d7(0x314,0x392)]:this[d7(0x2cb,0x39d)]();break;case states[d7(0x1ac,0x265)][d7(0x1b7,0x1cb)]:this[d7(0x32d,0x3c6)]();break;case states[d7(0x1ac,0x1f1)]['speaking']:case states[d7(0x1ac,0x240)]['waiting']:break;}}[_cmpF(0x419,0x4f3)](a){function d8(a,b){return _cmpF(b,a-0x1b3);}if(this[d8(0x560,0x691)]){this['chatButton'][d8(0x5e4,0x620)]();a[d8(0x579,0x461)]();}}get['chatButtonState'](){var a,b,c,d,e;function d9(a,b){return _cmpF(b,a-0xd7);}const f=this;if((a=f['chatPanel'])==null?void 0x0:a[d9(0x52f,0x4a5)]){return states[d9(0x508,0x4b3)];}if(f['voiceOnly']){if((b=f['$audioManager'])==null?void 0x0:b['isPlaying']){return states['voice'][d9(0x53f,0x51d)];}else if(f[d9(0x50a,0x602)]){return states[d9(0x477,0x3da)][d9(0x418,0x310)];}if((d=(c=f[d9(0x36f,0x40a)])==null?void 0x0:c[d9(0x4b8,0x463)])==null?void 0x0:d['async']){return states[d9(0x477,0x4f5)][d9(0x418,0x2fa)];}if((e=f[d9(0x36f,0x433)])==null?void 0x0:e[d9(0x3cb,0x2fe)]){return states[d9(0x477,0x3ec)]['active'];}return states[d9(0x477,0x4d4)][d9(0x5df,0x61a)];}return states[d9(0x46e,0x432)];}[_cmpF(0x3a3,0x2f3)](a=this['chatButtonState']){function da(a,b){return _cmpF(b,a- -0x3);}this[da(0x415,0x37e)][da(0x517,0x537)]=a;}[_cmpF(0x41d,0x512)](a){function db(a,b){return _cmpF(a,b- -0x4e2);}a!=null?a:a=this[db(-0x254,-0x24a)][db(-0xb5,-0x1d3)][db(-0x17a,-0x8e)]['at'](-0x3);a[db(-0x1f1,-0x26c)]=!![];if(a[db(0xce,-0x40)]['stateData']){this[db(-0x292,-0x20a)]['applyState'](a['data'][db(-0x37,-0xb7)][db(-0x47,-0x157)]);return;}return this[db(-0x72,-0x48)][db(-0xec,-0x27)]();}[_cmpF(0x1e9,0x2c1)](a){if(a[dc(0x315,0x404)][dc(0x4d8,0x38d)]){this[dc(0x35b,0x23a)][dc(0x28b,0x2fd)](a[dc(0x43c,0x404)][dc(0x3b8,0x38d)][dc(0xcb,0x1f6)]);return;}function dc(a,b){return _cmpF(a,b- -0x9e);}return this[dc(0x2df,0x3fc)]['redo']();}[_cmpF(0x49c,0x47f)](){const a=this['chatPanel'][dd(-0x3b,0x9f)][dd(0x10a,0xb9)]['at'](-0x3);function dd(a,b){return _cmpF(b,a- -0x34a);}return!this[dd(-0x72,-0x135)][dd(0xa,0xb7)]&&a&&a['undoable']&&!a[dd(-0xd4,-0x1a7)];}['populateSettingsMenu']({items:a}){function de(a,b){return _cmpF(a,b-0x14e);}const b=this,{voiceActivation:c}=b;if(c){a[de(0x523,0x61e)]({'text':'Voice','icon':de(0x577,0x451),'menu':{'items':[{'text':'Enable\x20voice\x20activation','icon':de(0x630,0x52a),'hidden':b[de(0x295,0x3d4)],'onItem':()=>{b[df(-0x8c,0x9b)]();function df(a,b){return de(b,a- -0x5bc);}if(b[df(-0x1e8,-0x247)]){Toast[df(-0x47,-0x140)](df(-0x1ae,-0x147)+c[df(-0x1f6,-0xd3)]+df(0x6e,0x15c));}}},{'text':de(0x72e,0x61d),'icon':de(0x4dc,0x548),'hidden':!b[de(0x2b8,0x3d4)],'onItem':b['disableVoiceActivation'][de(0x6ef,0x66d)](b)},{'checked':b[de(0x43c,0x4fb)],'text':de(0x4b9,0x420),'onItem'({item:d}){b[dg(0x224,0x135)]('voice-only',d[dg(0x1c9,0x2b3)]);function dg(a,b){return de(b,a- -0x390);}b[dg(0x16b,0x200)]=d[dg(0x1c9,0x157)];}},{'checked':c[de(0x76f,0x622)],'text':de(0x674,0x56e),'onItem'({item:d}){function dh(a,b){return de(b,a- -0x2a0);}b[dh(0x314,0x286)](dh(0x1c8,0x1ca),d['checked']);b[dh(0x26a,0x134)][dh(0x382,0x35c)]=d[dh(0x2b9,0x30b)];}}]}});}}['doDestroy'](){var a,b,c;(a=this[di(-0x43,-0x32)])==null?void 0x0:a[di(-0x279,-0x18e)]();function di(a,b){return _cmpF(a,b- -0x44a);}(b=this[di(0x39,0xc5)])==null?void 0x0:b['destroy']();(c=this[di(-0x241,-0x146)])==null?void 0x0:c[di(-0x46,-0x18e)]();super[di(-0x19d,-0x116)]();}};__publicField(AIBase,_cmpF(0x4a1,0x3c1),{'model':null,'apiPlugin':null,'temperature':null,'max_tokens':null,'chatButton':![],'delayStatusTexts':['Waiting',_cmpF(0x2a4,0x33e),_cmpF(0x36e,0x3ed),_cmpF(0x64e,0x4fa)],'voiceActivation':{'$config':_cmpF(0x54d,0x48a)},'voiceOnly':![],'manageChatHistory':!![],'models':void 0x0,'agent':DefaultAgent,'fetchOptions':{},'undo':!![],'redo':!![],'showNoConnectionIcon':![],'debugMode':![],'dateFormat':'Y-MM-DDTHH:mm:ss','saveSettingsToLocalStorage':![]});__publicField(AIBase,_cmpF(0x35b,0x2d6),{'trackAsyncDelayStatus':0xbb8});AIBase[_cmpF(0x49b,0x34e)]=_cmpF(0x31c,0x2e0);export{ChatMessageModel,ChatBubbles,ChatPanelMixin_default,ChatPanel,ChatPopup,ChatButton,AIUtilities,createBasicTool,createConditionTool,createDeleteRecordsTool,createUpdateRecordsTool,createGetRecordsTool,createFilterTool,DefaultAgent,AIChatPanelMixin_default,AIChatPanel,AIChatPopup,AIBase};